<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>ODA ‚Äì Narraci√≥n de sucesos autobiogr√°ficos (Plantilla 2)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root{
      --primary:#b91c1c;
      --primary-soft:#fef2f2;
      --accent:#fb923c;
      --text:#111827;
      --muted:#6b7280;
      --border:#e5e7eb;
      --card:#ffffff;
      --shadow:0 16px 35px rgba(127,29,29,.18);
    }
    *{box-sizing:border-box;}
    body{
      margin:0;
      font-family:system-ui,-apple-system,"Segoe UI",sans-serif;
      background:linear-gradient(180deg,#fff7ed 0,#fef2f2 40%,#f9fafb 100%);
      color:var(--text);
      min-height:100vh;
      display:flex;
      justify-content:center;
      padding:14px 10px;
      position:relative;
    }
    /* Marca de agua del escudo */
    body::before{
      content:"";
      position:fixed;
      inset:12% 16%;
      background:url("escudo_escuela.png") center/contain no-repeat;
      opacity:.03;
      pointer-events:none;
      z-index:0;
    }
    /* Escudo fijo abajo */
    .school-logo-fixed{
      position:fixed;
      right:16px;
      bottom:10px;
      height:86px;
      opacity:0.95;
      z-index:5;
      pointer-events:none;
    }

    .wrapper{
      position:relative;
      z-index:1;
      width:100%;
      max-width:1180px;
      background:radial-gradient(circle at top left,#fee2e2 0,#ffffff 45%,#fef2f2 100%);
      border-radius:26px;
      box-shadow:var(--shadow);
      padding:14px 16px 16px;
      display:flex;
      flex-direction:column;
      gap:12px;
      border:1px solid #fed7d7;
    }

    header{
      display:grid;
      grid-template-columns:auto minmax(0,2.3fr) auto;
      gap:10px;
      align-items:center;
      padding-bottom:8px;
      border-bottom:1px solid #fee2e2;
    }
    @media(max-width:900px){
      header{
        grid-template-columns:1fr;
        text-align:center;
      }
    }
    .logo-left img{
      max-height:60px;
      width:auto;
      display:block;
    }
    @media(max-width:900px){
      .logo-left{display:flex;justify-content:center;}
    }
    .title-block h1{
      margin:0;
      font-size:1.22rem;
      display:flex;
      align-items:center;
      gap:8px;
      flex-wrap:wrap;
    }
    .title-block h1 .icon{
      font-size:1.45rem;
    }
    .title-meta{
      margin-top:3px;
      font-size:.84rem;
      color:var(--muted);
    }
    .phase-label{
      display:inline-flex;
      align-items:center;
      gap:4px;
      margin-top:3px;
      font-size:.8rem;
      font-weight:600;
      color:#7f1d1d;
      padding:2px 8px;
      border-radius:999px;
      background:#fee2e2;
    }
    .chips{
      margin-top:4px;
      display:flex;
      flex-wrap:wrap;
      gap:6px;
    }
    .chip{
      border-radius:999px;
      padding:1px 9px;
      font-size:.76rem;
      border:1px solid #fed7d7;
      background:#fff1f2;
      color:#b91c1c;
      display:inline-flex;
      align-items:center;
      gap:6px;
    }
    .chip .dot{
      width:8px;
      height:8px;
      border-radius:50%;
      background:#b91c1c;
    }
    .author-block{
      font-size:.78rem;
      color:#4b5563;
      text-align:right;
    }
    @media(max-width:900px){
      .author-block{text-align:center;}
    }
    .author-block strong{
      display:block;
      font-size:.86rem;
      color:#111827;
    }

    .layout{
      display:grid;
      grid-template-columns:260px minmax(0,1fr);
      gap:12px;
      margin-top:6px;
    }
    @media(max-width:960px){
      .layout{
        grid-template-columns:1fr;
      }
    }

    .sidebar{
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .card{
      background:var(--card);
      border-radius:18px;
      border:1px solid var(--border);
      padding:10px 11px;
    }
    .card-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:5px;
      gap:8px;
      flex-wrap:wrap;
    }
    .card-title{
      font-size:.9rem;
      font-weight:600;
      display:flex;
      align-items:center;
      gap:6px;
    }
    .card-title .icon{
      font-size:1.1rem;
    }
    .card-body{
      font-size:.86rem;
      color:var(--muted);
    }

    .student-name{
      display:flex;
      flex-direction:column;
      gap:4px;
      font-size:.82rem;
    }
    .student-name label{
      font-weight:600;
      color:#374151;
    }
    .student-name input{
      padding:4px 8px;
      border-radius:999px;
      border:1px solid #fecaca;
      font-size:.83rem;
    }

    .avatar-mini{
      display:grid;
      grid-template-columns:auto 1fr;
      gap:8px;
      align-items:center;
      margin-top:6px;
    }
    .avatar-mini-img{
      width:80px;
      display:flex;
      justify-content:center;
      align-items:flex-end;
    }
    .avatar-mini-img img{
      width:80px;
      height:auto;
      object-fit:contain;
    }
    .avatar-mini-text{
      font-size:.8rem;
      color:#4b5563;
    }
    .avatar-mini-text strong{
      color:#b91c1c;
    }

    .stepper{
      margin-top:6px;
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .step-btn{
      border-radius:999px;
      border:1px solid #fee2e2;
      background:#fff;
      font-size:.82rem;
      padding:5px 8px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:6px;
      cursor:pointer;
      color:#7f1d1d;
    }
    .step-left{
      display:flex;
      align-items:center;
      gap:6px;
    }
    .step-circle{
      width:20px;
      height:20px;
      border-radius:999px;
      border:2px solid #fecaca;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:.75rem;
      font-weight:600;
      background:#fff5f5;
    }
    .step-label-main{
      font-weight:600;
    }
    .step-label-sub{
      font-size:.74rem;
      color:#9f1239;
    }
    .step-btn.active{
      background:linear-gradient(90deg,#b91c1c,#f97316);
      border-color:#b91c1c;
      color:#fff;
      box-shadow:0 10px 22px rgba(185,28,28,.45);
    }
    .step-btn.active .step-circle{
      background:#fff;
      border-color:#fee2e2;
      color:#b91c1c;
    }
    .step-btn .icon-right{
      font-size:.95rem;
    }

    .sidebar .btn-row{
      margin-top:6px;
      display:flex;
      flex-wrap:wrap;
      gap:6px;
    }
    .btn{
      border-radius:999px;
      border:none;
      font-size:.8rem;
      padding:6px 10px;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:6px;
      font-weight:600;
    }
    .btn-primary{
      background:var(--primary);
      color:#fff;
    }
    .btn-secondary{
      background:#f3f4f6;
      color:#111827;
    }
    .btn-outline{
      background:#fff;
      color:#b91c1c;
      border:1px solid #fecaca;
    }

    .content-area{
      display:flex;
      flex-direction:column;
      gap:10px;
    }

    .prop-card .card-body{
      display:grid;
      grid-template-columns:minmax(0,1.5fr) minmax(0,1fr);
      gap:12px;
    }
    @media(max-width:900px){
      .prop-card .card-body{grid-template-columns:1fr;}
    }
    .objective-list{
      margin:4px 0 0;
      padding-left:18px;
    }
    .objective-list li{
      margin-bottom:3px;
    }
    .timeline{
      display:flex;
      flex-direction:column;
      gap:6px;
      font-size:.8rem;
    }
    .timeline-item{
      display:flex;
      align-items:flex-start;
      gap:6px;
    }
    .timeline-bullet{
      width:10px;
      height:10px;
      border-radius:999px;
      background:#b91c1c;
      margin-top:4px;
    }
    .timeline-text strong{
      color:#b91c1c;
    }

    .step-panel{
      display:none;
      font-size:.86rem;
    }
    .step-panel.active{display:block;}

    .example-box{
      border-radius:16px;
      padding:8px 10px;
      background:#fff7ed;
      border:1px solid #fed7aa;
      color:#7c2d12;
      font-size:.85rem;
    }
    .example-label{
      font-size:.78rem;
      font-weight:600;
      text-transform:uppercase;
      letter-spacing:.04em;
      color:#c2410c;
      margin-bottom:3px;
    }
    .highlight{
      font-weight:600;
      color:#b91c1c;
    }
    .sentence-list{
      margin:6px 0 0;
      padding-left:18px;
    }
    .sentence-list li{
      margin-bottom:4px;
    }

    textarea{
      width:100%;
      min-height:140px;
      resize:vertical;
      border-radius:14px;
      border:1px solid #e5e7eb;
      padding:8px 9px;
      font-family:inherit;
      font-size:.86rem;
    }

    .status{
      margin-top:6px;
      font-size:.82rem;
      border-radius:12px;
      padding:6px 8px;
      display:flex;
      align-items:flex-start;
      gap:6px;
    }
    .status-info{
      background:#fef2f2;
      color:#7f1d1d;
      border:1px solid #fecaca;
    }
    .status-success{
      background:#ecfdf3;
      color:#166534;
      border:1px solid #bbf7d0;
    }
    .status-error{
      background:#fef2f2;
      color:#b91c1c;
      border:1px solid #fecaca;
    }

    .checklist{
      margin-top:4px;
      font-size:.84rem;
    }
    .checklist label{
      display:flex;
      align-items:flex-start;
      gap:4px;
      margin-bottom:3px;
      cursor:pointer;
    }
    .checklist input[type="checkbox"]{
      margin-top:2px;
    }

    .mini-quiz{
      list-style:none;
      padding:0;
      margin:6px 0 0;
      font-size:.84rem;
    }
    .mini-quiz li{
      margin-bottom:6px;
      padding:5px 7px;
      border-radius:10px;
      background:#f9fafb;
      border:1px solid #e5e7eb;
    }
    .mini-quiz-options label{
      display:flex;
      align-items:center;
      gap:4px;
      cursor:pointer;
      font-size:.83rem;
      color:#4b5563;
    }

    .info-card .card-body{
      font-size:.84rem;
    }

    footer{
      margin-top:4px;
      padding-top:7px;
      border-top:1px solid #fee2e2;
      font-size:.78rem;
      color:#6b7280;
      display:flex;
      justify-content:space-between;
      flex-wrap:wrap;
      gap:6px;
    }
    footer .project{
      font-style:italic;
      color:#4b5563;
    }
  </style>
</head>
<body>
  <img src="escudo_escuela.png" alt="Escudo escuela" class="school-logo-fixed">

  <div class="wrapper">
    <header>
      <div class="logo-left">
        <img src="sep_logo.png" alt="Secretar√≠a de Educaci√≥n P√∫blica">
      </div>
      <div class="title-block">
        <h1>
          <span class="icon">üìö</span>
          <span>ODA ‚Äì Narraci√≥n de sucesos autobiogr√°ficos</span>
        </h1>
        <div class="title-meta">
          Contenido: <strong>Narraci√≥n de sucesos autobiogr√°ficos.</strong><br>
          PDA: <strong>Escribe la narraci√≥n de los hechos autobiogr√°ficos, haciendo uso de comas, puntos y seguido, puntos y aparte y dos puntos, para dar claridad y orden a las ideas.</strong><br>
          <span class="phase-label">Lenguajes ¬∑ Fase 5</span>
        </div>
        <div class="chips">
          <span class="chip"><span class="dot"></span>Campo formativo: Lenguajes</span>
          <span class="chip">Proyecto: <strong>Mi historia, mi voz, mi camino</strong></span>
        </div>
      </div>
      <div class="author-block">
        <strong>Autor: Mtro. Mart√≠n Reta</strong>
        Escuela Primaria ‚ÄúGral. L√°zaro C√°rdenas‚Äù<br>
        Ejido Santa Mar√≠a, Pesquer√≠a, N.L.
      </div>
    </header>

    <div class="layout">
      <!-- SIDEBAR -->
      <aside class="sidebar">
        <div class="card">
          <div class="card-header">
            <div class="card-title">
              <span class="icon">üßë‚Äçüéì</span>
              <span>Datos del alumno</span>
            </div>
          </div>
          <div class="card-body">
            <div class="student-name">
              <label for="studentName">Nombre del alumno(a):</label>
              <input type="text" id="studentName" placeholder="Escribe tu nombre aqu√≠">
            </div>

            <div class="avatar-mini">
              <div class="avatar-mini-img">
                <img src="avatar_guia.png" alt="Avatar del Mtro. Mart√≠n Reta">
              </div>
              <div class="avatar-mini-text">
                <strong>Hola, soy el maestro Mart√≠n.</strong><br>
                Te guiar√© paso a paso para escribir una autobiograf√≠a clara y ordenada.
              </div>
            </div>

            <div class="stepper">
              <button class="step-btn active" data-step="1">
                <div class="step-left">
                  <div class="step-circle">1</div>
                  <div>
                    <div class="step-label-main">Observar ejemplo</div>
                    <div class="step-label-sub">C√≥mo se ve una autobiograf√≠a</div>
                  </div>
                </div>
                <span class="icon-right">‚ûú</span>
              </button>
              <button class="step-btn" data-step="2">
                <div class="step-left">
                  <div class="step-circle">2</div>
                  <div>
                    <div class="step-label-main">Corregir oraciones</div>
                    <div class="step-label-sub">Signos de puntuaci√≥n</div>
                  </div>
                </div>
                <span class="icon-right">‚ûú</span>
              </button>
              <button class="step-btn" data-step="3">
                <div class="step-left">
                  <div class="step-circle">3</div>
                  <div>
                    <div class="step-label-main">Escribir mi texto</div>
                    <div class="step-label-sub">Mi historia, con mi voz</div>
                  </div>
                </div>
                <span class="icon-right">‚ûú</span>
              </button>
              <button class="step-btn" data-step="4">
                <div class="step-left">
                  <div class="step-circle">4</div>
                  <div>
                    <div class="step-label-main">Autoevaluaci√≥n</div>
                    <div class="step-label-sub">Reviso mi escritura</div>
                  </div>
                </div>
                <span class="icon-right">‚úì</span>
              </button>
            </div>

            <div class="btn-row">
              <button class="btn btn-outline" id="btnPrintResults">üñ®Ô∏è Imprimir resultados</button>
              <button class="btn btn-outline" id="btnPrintActivity">üìÑ Imprimir actividad</button>
            </div>

            <div class="btn-row">
              <button class="btn btn-primary" id="btnPlayVoice">üîä Escuchar instrucciones</button>
            </div>
          </div>
        </div>

        <div class="card info-card">
          <div class="card-header">
            <div class="card-title">
              <span class="icon">üîó</span>
              <span>Vinculaci√≥n</span>
            </div>
          </div>
          <div class="card-body">
            <p>
              Esta ODA se integra al proyecto <strong>‚ÄúMi historia, mi voz, mi camino‚Äù</strong> y puede articularse con:
            </p>
            <ul class="objective-list">
              <li>Creaci√≥n de un <strong>libro colectivo</strong> de autobiograf√≠as.</li>
              <li>Grabaci√≥n de relatos en <strong>audio o video</strong>.</li>
              <li>Presentaci√≥n de fragmentos en <strong>asamblea escolar</strong>.</li>
            </ul>
          </div>
        </div>
      </aside>

      <!-- CONTENIDO PRINCIPAL -->
      <section class="content-area">
        <!-- Prop√≥sito + Ruta -->
        <div class="card prop-card">
          <div class="card-header">
            <div class="card-title">
              <span class="icon">üéØ</span>
              <span>Prop√≥sito y ruta de trabajo</span>
            </div>
          </div>
          <div class="card-body">
            <div>
              Al finalizar esta ODA, las y los estudiantes ser√°n capaces de <strong>escribir un texto autobiogr√°fico</strong> en el que narren sucesos significativos de su vida, utilizando <strong>comas, puntos y seguido, puntos y aparte y dos puntos</strong> para dar claridad y orden a sus ideas.
              <ul class="objective-list">
                <li>Reconocer la <strong>estructura</strong> de un texto autobiogr√°fico (inicio, desarrollo y cierre).</li>
                <li>Usar de manera intencional los <strong>signos de puntuaci√≥n</strong> para organizar la narraci√≥n.</li>
                <li>Relatar experiencias personales con <strong>coherencia temporal</strong> (antes, durante, despu√©s).</li>
              </ul>
            </div>
            <div class="timeline">
              <div class="timeline-item">
                <div class="timeline-bullet"></div>
                <div class="timeline-text">
                  <strong>Paso 1 ‚Äì Observo:</strong> leo un ejemplo breve y noto c√≥mo est√°n colocados los puntos, comas y dos puntos.
                </div>
              </div>
              <div class="timeline-item">
                <div class="timeline-bullet"></div>
                <div class="timeline-text">
                  <strong>Paso 2 ‚Äì Corrijo:</strong> ordeno y punt√∫o oraciones relacionadas con recuerdos de la infancia.
                </div>
              </div>
              <div class="timeline-item">
                <div class="timeline-bullet"></div>
                <div class="timeline-text">
                  <strong>Paso 3 ‚Äì Escribo:</strong> redacto mi propio texto autobiogr√°fico.
                </div>
              </div>
              <div class="timeline-item">
                <div class="timeline-bullet"></div>
                <div class="timeline-text">
                  <strong>Paso 4 ‚Äì Reviso:</strong> uso una lista de cotejo breve para mejorar mi texto.
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Paneles por paso -->
        <div class="card">
          <div class="card-body">
            <!-- Paso 1 -->
            <div class="step-panel active" id="step-panel-1">
              <h2 style="margin:0 0 6px;font-size:.96rem;color:#7f1d1d;">Paso 1. Observo un ejemplo de autobiograf√≠a</h2>
              <div class="example-box">
                <div class="example-label">Ejemplo de fragmento autobiogr√°fico</div>
                <p>
                  Me llamo <span class="highlight">Sof√≠a</span> y nac√≠ un d√≠a lluvioso de septiembre. <strong>Cuando ten√≠a ocho a√±os:</strong> ocurri√≥ algo que nunca voy a olvidar: particip√© por primera vez en la escolta de la escuela.
                </p>
                <p>
                  Esa ma√±ana estaba muy nerviosa, <strong>mi mam√° me pein√≥</strong> con dos trenzas apretadas, prepar√≥ mi uniforme y me dijo: <strong>‚ÄúConf√≠o en ti, hazlo con calma‚Äù.</strong> Yo sent√≠a mariposas en el est√≥mago; sin embargo, al escuchar el himno nacional respir√© profundo, di el primer paso y poco a poco el miedo se convirti√≥ en orgullo.
                </p>
                <p>
                  Al final de la ceremonia, la directora se acerc√≥ y me dijo: <strong>‚ÄúSof√≠a, lo hiciste muy bien, se nota que te preparaste‚Äù.</strong> Ese d√≠a entend√≠ que los momentos importantes de mi vida se construyen con esfuerzo, paciencia y apoyo de mi familia.
                </p>
              </div>
              <ul class="sentence-list">
                <li>Subraya un <strong>punto y seguido</strong> y un <strong>punto y aparte</strong>.</li>
                <li>Encierra en un c√≠rculo los <strong>dos puntos</strong> que aparecen en el texto.</li>
                <li>Comenta con un compa√±ero: ¬øqu√© momento importante cuenta Sof√≠a?</li>
              </ul>
            </div>

            <!-- Paso 2 -->
            <div class="step-panel" id="step-panel-2">
              <h2 style="margin:0 0 6px;font-size:.96rem;color:#7f1d1d;">Paso 2. Ordeno y punt√∫o recuerdos</h2>
              <p>Estas oraciones forman parte de una autobiograf√≠a, pero <strong>no tienen signos de puntuaci√≥n</strong>. Reescr√≠belas correctamente en tu cuaderno, usando comas, puntos y seguido, puntos y aparte y dos puntos.</p>
              <ol class="sentence-list">
                <li>cuando era peque√±o viv√≠a con mis abuelos ellos me ense√±aron a levantarme temprano y ayudar en la casa</li>
                <li>recuerdo tres cosas muy importantes de mi infancia jugar futbol en el patio cuidar a los animales y acompa√±ar a mi abuelo a la labor</li>
                <li>el d√≠a que entr√© a quinto grado me sent√≠a nervioso conoc√≠ nuevos compa√±eros la maestra nos dio la bienvenida y dijo ma√±ana comenzaremos un proyecto sobre nuestras historias</li>
              </ol>
              <div class="status status-info">
                <span>üí°</span>
                <div>Despu√©s de corregir, revisa si cada oraci√≥n tiene al menos un <strong>punto</strong>, si usaste <strong>comas</strong> al enumerar y si los <strong>dos puntos</strong> aparecen antes de una lista o frase que se presenta.</div>
              </div>
            </div>

            <!-- Paso 3 -->
            <div class="step-panel" id="step-panel-3">
              <h2 style="margin:0 0 6px;font-size:.96rem;color:#7f1d1d;">Paso 3. Escribo mi autobiograf√≠a</h2>
              <p>Redacta un <strong>texto autobiogr√°fico corto</strong> (entre 1 y 3 p√°rrafos) sobre un momento importante de tu vida: tu primer d√≠a en la escuela, un viaje, un partido, una presentaci√≥n, una celebraci√≥n familiar, etc.</p>
              <textarea id="studentText" placeholder="Escribe aqu√≠ tu texto autobiogr√°fico. Procura usar comas, puntos y seguido, puntos y aparte y dos puntos para organizar tus ideas."></textarea>
              <div class="btn-row" style="margin-top:6px;">
                <button class="btn btn-primary" id="btnCheckText">üîé Revisar aspectos b√°sicos</button>
                <button class="btn btn-secondary" id="btnClearText">üßπ Borrar texto</button>
              </div>
              <div id="statusText" class="status status-info">
                <span>‚úçÔ∏è</span>
                <div>Escribe tu texto y luego haz clic en <strong>‚ÄúRevisar aspectos b√°sicos‚Äù</strong> para ver una orientaci√≥n r√°pida sobre la longitud y el uso de signos.</div>
              </div>
            </div>

            <!-- Paso 4 -->
            <div class="step-panel" id="step-panel-4">
              <h2 style="margin:0 0 6px;font-size:.96rem;color:#7f1d1d;">Paso 4. Me autoeval√∫o</h2>
              <p>Marca si consideras que ya cumpliste con cada aspecto del texto autobiogr√°fico.</p>
              <div class="checklist">
                <label><input type="checkbox" id="chkEstructura"> Mi texto tiene <strong>inicio, desarrollo y cierre</strong> claros.</label>
                <label><input type="checkbox" id="chkComas"> Us√© <strong>comas</strong> para separar ideas o elementos de una lista.</label>
                <label><input type="checkbox" id="chkPuntosSeguido"> Utilic√© <strong>puntos y seguido</strong> para separar ideas relacionadas dentro de un mismo momento.</label>
                <label><input type="checkbox" id="chkPuntosAparte"> Inclu√≠ al menos un <strong>punto y aparte</strong> cuando cambi√© de momento o escena.</label>
                <label><input type="checkbox" id="chkDosPuntos"> Us√© <strong>dos puntos</strong> al introducir una enumeraci√≥n o un di√°logo.</label>
                <label><input type="checkbox" id="chkTiempoVerbal"> Mantengo el <strong>mismo tiempo verbal</strong> (principalmente pasado) en la mayor parte del texto.</label>
              </div>

              <p style="margin-top:8px;">Responde tambi√©n este mini cuestionario:</p>
              <ul class="mini-quiz">
                <li>
                  <p><strong>1.</strong> ¬øPara qu√© sirven los puntos y aparte en un texto autobiogr√°fico?</p>
                  <div class="mini-quiz-options">
                    <label><input type="radio" name="mq1" value="a"> Para que el texto se vea m√°s largo.</label>
                    <label><input type="radio" name="mq1" value="b"> Para separar momentos o escenas diferentes de mi historia.</label>
                    <label><input type="radio" name="mq1" value="c"> Para marcar que alguien est√° hablando en voz alta.</label>
                  </div>
                </li>
                <li>
                  <p><strong>2.</strong> ¬øEn qu√© caso es m√°s √∫til usar dos puntos en tu autobiograf√≠a?</p>
                  <div class="mini-quiz-options">
                    <label><input type="radio" name="mq2" value="a"> Cuando quiero descansar de escribir.</label>
                    <label><input type="radio" name="mq2" value="b"> Antes de empezar cualquier nuevo p√°rrafo.</label>
                    <label><input type="radio" name="mq2" value="c"> Antes de una lista o una frase que voy a presentar, por ejemplo, algo que alguien dijo.</label>
                  </div>
                </li>
              </ul>

              <div class="btn-row" style="margin-top:6px;">
                <button class="btn btn-primary" id="btnCheckEval">üìù Ver mi autoevaluaci√≥n</button>
                <button class="btn btn-secondary" id="btnResetEval">‚Ü©Ô∏è Reiniciar</button>
              </div>
              <div id="statusEval" class="status status-info">
                <span>üí¨</span>
                <div>Marca las casillas y responde las preguntas. Luego haz clic en <strong>‚ÄúVer mi autoevaluaci√≥n‚Äù</strong>.</div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <footer>
      <div>
        ¬© 2025. Elaborado por <strong>Mtro. Mart√≠n Reta</strong> ‚Äì Escuela Primaria ‚ÄúGral. L√°zaro C√°rdenas‚Äù.
      </div>
      <div class="project">
        Proyecto ‚ÄúMi historia, mi voz, mi camino‚Äù ¬∑ ODA: Narraci√≥n de sucesos autobiogr√°ficos (Plantilla 2).
      </div>
    </footer>
  </div>

  <script>
    // Navegaci√≥n por pasos (stepper)
    const stepButtons = document.querySelectorAll(".step-btn");
    const stepPanels = {
      1: document.getElementById("step-panel-1"),
      2: document.getElementById("step-panel-2"),
      3: document.getElementById("step-panel-3"),
      4: document.getElementById("step-panel-4")
    };

    stepButtons.forEach(btn=>{
      btn.addEventListener("click",()=>{
        const step = btn.dataset.step;
        stepButtons.forEach(b=>b.classList.remove("active"));
        btn.classList.add("active");
        Object.keys(stepPanels).forEach(k=>stepPanels[k].classList.remove("active"));
        stepPanels[step].classList.add("active");
      });
    });

    // Audio instrucciones
    const btnPlayVoice = document.getElementById("btnPlayVoice");
    const instructionsText = "Hola, soy el maestro Martin Reta. Primero lee el ejemplo de autobiografia y observa como se usan los signos de puntuacion. Despues corrige las oraciones propuestas. Luego escribe tu propio texto autobiografico sobre un momento importante de tu vida. Al final, revisa tu trabajo con la autoevaluacion rapida y las preguntas de repaso.";
    function speakInstructions(){
      if(!('speechSynthesis' in window)){
        alert("Tu navegador no permite la lectura en voz alta. Puedes leer las instrucciones directamente en pantalla.");
        return;
      }
      window.speechSynthesis.cancel();
      const u = new SpeechSynthesisUtterance(instructionsText);
      u.lang = "es-MX";
      const voices = window.speechSynthesis.getVoices();
      let chosen = null;
      if(voices && voices.length){
        chosen = voices.find(v=>v.lang.startsWith("es") && /Hombre|Male|Miguel|Diego|Jorge|Antonio|Carlos/i.test(v.name))
               || voices.find(v=>v.lang.startsWith("es"))
               || voices[0];
      }
      if(chosen){u.voice = chosen;}
      window.speechSynthesis.speak(u);
    }
    btnPlayVoice.addEventListener("click",()=>{
      const voices = window.speechSynthesis.getVoices();
      if(!voices || voices.length === 0){
        window.speechSynthesis.onvoiceschanged = speakInstructions;
        window.speechSynthesis.getVoices();
      }else{
        speakInstructions();
      }
    });

    // Revisi√≥n b√°sica del texto
    const studentText = document.getElementById("studentText");
    const statusText = document.getElementById("statusText");
    document.getElementById("btnCheckText").addEventListener("click",()=>{
      const text = studentText.value.trim();
      if(!text){
        statusText.className = "status status-error";
        statusText.innerHTML = "<span>‚ö†Ô∏è</span><div>A√∫n no has escrito tu texto. Escribe tu autobiografia y vuelve a intentar.</div>";
        return;
      }
      const length = text.split(/\\s+/).length;
      const hasComma = /,/.test(text);
      const hasDot = /\\./.test(text);
      const hasColon = /:/.test(text);
      let messages = [];
      messages.push("Tu texto tiene aproximadamente <strong>"+length+"</strong> palabras.");
      if(hasComma){
        messages.push("‚úÖ Se detectaron <strong>comas</strong> en tu texto.");
      }else{
        messages.push("üîç No se detectaron comas. Revisa si puedes usarlas para separar ideas o elementos de una lista.");
      }
      if(hasDot){
        messages.push("‚úÖ Se detectaron <strong>puntos</strong>. Revisa si hay puntos y seguido y puntos y aparte.");
      }else{
        messages.push("üîç No se detectaron puntos. Es importante usarlos para cerrar oraciones.");
      }
      if(hasColon){
        messages.push("‚úÖ Se detectaron <strong>dos puntos</strong>. √ösalos para introducir listas o di√°logos.");
      }else{
        messages.push("‚ÑπÔ∏è No se detectaron dos puntos. Puedes usarlos, por ejemplo, antes de escribir algo que alguien dijo.");
      }
      statusText.className = "status status-success";
      statusText.innerHTML = "<span>‚úÖ</span><div>"+messages.join("<br>")+"</div>";
    });

    document.getElementById("btnClearText").addEventListener("click",()=>{
      studentText.value = "";
      statusText.className = "status status-info";
      statusText.innerHTML = "<span>‚úçÔ∏è</span><div>Escribe tu texto y luego haz clic en <strong>‚ÄúRevisar aspectos b√°sicos‚Äù</strong> para ver una orientaci√≥n r√°pida sobre la longitud y el uso de signos.</div>";
    });

    // Autoevaluaci√≥n
    const statusEval = document.getElementById("statusEval");
    const correctMiniQuiz = { mq1:"b", mq2:"c" };
    let lastEvalSummary = null;

    document.getElementById("btnCheckEval").addEventListener("click",()=>{
      const checks = {
        estructura: document.getElementById("chkEstructura").checked,
        comas: document.getElementById("chkComas").checked,
        ps: document.getElementById("chkPuntosSeguido").checked,
        pa: document.getElementById("chkPuntosAparte").checked,
        dosp: document.getElementById("chkDosPuntos").checked,
        tiempo: document.getElementById("chkTiempoVerbal").checked
      };
      let marcados = Object.values(checks).filter(v=>v).length;

      let quizCorrect = 0;
      ["mq1","mq2"].forEach(q=>{
        const radios = document.querySelectorAll('input[name="'+q+'"]');
        let sel = null;
        radios.forEach(r=>{ if(r.checked) sel = r.value; });
        if(sel === correctMiniQuiz[q]) quizCorrect++;
      });

      if(marcados === 0 && quizCorrect === 0){
        statusEval.className = "status status-info";
        statusEval.innerHTML = "<span>‚ÑπÔ∏è</span><div>Todav√≠a no has marcado aspectos ni respondido el mini cuestionario. Intenta completar al menos algunos puntos.</div>";
        return;
      }

      let mensajes = [];
      mensajes.push("Aspectos marcados en la lista de cotejo: <strong>"+marcados+" de 6</strong>.");
      if(checks.estructura){
        mensajes.push("‚úÖ Tu texto tiene inicio, desarrollo y cierre.");
      }else{
        mensajes.push("üîç Revisa si tu texto presenta claramente el momento en que inicia la historia, lo que sucede y c√≥mo termina.");
      }
      if(checks.comas){
        mensajes.push("‚úÖ Indicaste que usaste comas para separar ideas o elementos.");
      }else{
        mensajes.push("üîç Puedes revisar si hay listas o ideas largas que necesiten comas.");
      }
      if(checks.ps){
        mensajes.push("‚úÖ Mencionas que usas puntos y seguido para separar ideas dentro del mismo momento.");
      }else{
        mensajes.push("üîç Intenta separar oraciones largas en varias m√°s cortas con puntos y seguido.");
      }
      if(checks.pa){
        mensajes.push("‚úÖ Indicaste que usas puntos y aparte para cambiar de momento o escena.");
      }else{
        mensajes.push("üîç Quiz√° puedas marcar un nuevo p√°rrafo cuando cambies de d√≠a, lugar o situaci√≥n.");
      }
      if(checks.dosp){
        mensajes.push("‚úÖ Se√±alas que usas dos puntos para presentar una lista o un di√°logo.");
      }else{
        mensajes.push("‚ÑπÔ∏è Recuerda que los dos puntos se usan, por ejemplo, antes de escribir lo que alguien dijo.");
      }
      if(checks.tiempo){
        mensajes.push("‚úÖ Dices que mantienes el mismo tiempo verbal (principalmente pasado) en la mayor parte del texto.");
      }else{
        mensajes.push("üîç Revisa si cambias innecesariamente entre pasado y presente.");
      }

      mensajes.push("Respuestas correctas en el mini cuestionario: <strong>"+quizCorrect+" de 2</strong>.");
      if(quizCorrect === 2){
        mensajes.push("üåü Comprendes bien el uso de puntos y aparte y de los dos puntos.");
      }else if(quizCorrect === 1){
        mensajes.push("üìö Vas por buen camino, pero conviene repasar el uso de estos signos.");
      }else{
        mensajes.push("‚úèÔ∏è Es recomendable volver a leer la explicaci√≥n y comentar tus dudas con el docente.");
      }

      lastEvalSummary = {
        marcados,
        quizCorrect,
        mensajes
      };

      statusEval.className = "status status-success";
      statusEval.innerHTML = "<span>‚úÖ</span><div>"+mensajes.join("<br>")+"</div>";
    });

    document.getElementById("btnResetEval").addEventListener("click",()=>{
      ["chkEstructura","chkComas","chkPuntosSeguido","chkPuntosAparte","chkDosPuntos","chkTiempoVerbal"].forEach(id=>{
        document.getElementById(id).checked = false;
      });
      ["mq1","mq2"].forEach(q=>{
        document.querySelectorAll('input[name="'+q+'"]').forEach(r=>r.checked=false);
      });
      lastEvalSummary = null;
      statusEval.className = "status status-info";
      statusEval.innerHTML = "<span>üí¨</span><div>Marca las casillas y responde las preguntas. Luego haz clic en <strong>‚ÄúVer mi autoevaluaci√≥n‚Äù</strong>.</div>";
    });

    // Imprimir resultados
    document.getElementById("btnPrintResults").addEventListener("click",()=>{
      const studentName = document.getElementById("studentName").value.trim();
      const text = studentText.value.trim();
      if(!lastEvalSummary && !text){
        alert("Primero realiza tu texto y la autoevaluaci√≥n para poder imprimir resultados.");
        return;
      }
      const w = window.open("","_blank");
      w.document.write("<html><head><title>Resultados del estudiante ‚Äì Autobiograf√≠a</title>");
      w.document.write('<style>body{font-family:system-ui,Arial,sans-serif;font-size:13px;padding:16px;color:#111827;} h1{font-size:20px;margin-bottom:4px;} h2{font-size:16px;margin-top:16px;margin-bottom:6px;} p{margin:4px 0;} ul{padding-left:18px;} li{margin-bottom:3px;} .small{font-size:12px;color:#4b5563;} .blue{color:#1d4ed8;} .red{color:#b91c1c;} pre{white-space:pre-wrap;font-size:12px;border:1px solid #e5e7eb;border-radius:8px;padding:8px;background:#f9fafb;}</style>');
      w.document.write("</head><body>");
      w.document.write("<h1>Resultados del estudiante ‚Äì Narraci√≥n de sucesos autobiogr√°ficos</h1>");
      w.document.write("<p><strong>Nombre del alumno(a):</strong> "+(studentName||"______________________________")+"</p>");
      w.document.write("<p><strong>Docente:</strong> Mtro. Mart√≠n Reta</p>");
      w.document.write("<p><strong>Proyecto:</strong> Mi historia, mi voz, mi camino</p>");
      w.document.write("<p class='small'><strong>PDA:</strong> Escribe la narraci√≥n de los hechos autobiogr√°ficos, haciendo uso de comas, puntos y seguido, puntos y aparte y dos puntos.</p>");

      if(text){
        const length = text.split(/\\s+/).length;
        w.document.write("<h2>Texto del estudiante</h2>");
        w.document.write("<p class='small'>Extensi√≥n aproximada: "+length+" palabras.</p>");
        w.document.write("<pre>"+text.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</pre>");
      }

      if(lastEvalSummary){
        w.document.write("<h2>Autoevaluaci√≥n</h2>");
        w.document.write("<p>Aspectos marcados en lista de cotejo: <span class='blue'>"+lastEvalSummary.marcados+" de 6</span></p>");
        w.document.write("<p>Mini cuestionario: <span class='blue'>"+lastEvalSummary.quizCorrect+" de 2</span> respuestas correctas.</p>");
        if(lastEvalSummary.mensajes && lastEvalSummary.mensajes.length){
          w.document.write("<ul>");
          lastEvalSummary.mensajes.forEach(msg=>{
            const color = /‚úÖ|üåü/.test(msg) ? "blue" : (/üîç|‚úèÔ∏è|‚ÑπÔ∏è/.test(msg) ? "red" : ""); 
            if(color==="blue"){
              w.document.write("<li class='blue'>"+msg+"</li>");
            }else if(color==="red"){
              w.document.write("<li class='red'>"+msg+"</li>");
            }else{
              w.document.write("<li>"+msg+"</li>");
            }
          });
          w.document.write("</ul>");
        }
      }

      w.document.write('<p class="small">Observaciones del docente:</p>');
      w.document.write('<p class="small">______________________________________________</p>');
      w.document.write('<p class="small">______________________________________________</p>');
      w.document.write('<p class="small">______________________________________________</p>');
      w.document.write("</body></html>");
      w.document.close();
      w.print();
    });

    // Imprimir actividad para resolver
    document.getElementById("btnPrintActivity").addEventListener("click",()=>{
      const studentName = document.getElementById("studentName").value.trim();
      const w = window.open("","_blank");
      w.document.write("<html><head><title>Actividad para imprimir ‚Äì Narraci√≥n de sucesos autobiogr√°ficos</title>");
      w.document.write('<style>body{font-family:system-ui,Arial,sans-serif;font-size:13px;padding:16px;color:#111827;} h1{font-size:20px;margin-bottom:4px;} h2{font-size:16px;margin-top:16px;margin-bottom:6px;} p{margin:6px 0;} ol{padding-left:18px;} li{margin-bottom:6px;} .small{font-size:12px;color:#4b5563;} .vf-item{margin-bottom:6px;}</style>');
      w.document.write("</head><body>");
      w.document.write("<h1>Actividad para imprimir ‚Äì Narraci√≥n de sucesos autobiogr√°ficos</h1>");
      w.document.write("<p><strong>Nombre del alumno(a):</strong> "+(studentName||"______________________________")+"</p>");
      w.document.write("<p><strong>Docente:</strong> Mtro. Mart√≠n Reta &nbsp;&nbsp;&nbsp; <strong>Proyecto:</strong> Mi historia, mi voz, mi camino</p>");
      w.document.write("<p class='small'><strong>PDA:</strong> Escribe la narraci√≥n de los hechos autobiogr√°ficos, haciendo uso de comas, puntos y seguido, puntos y aparte y dos puntos.</p>");

      w.document.write("<h2>Parte A. Observa el ejemplo</h2>");
      w.document.write("<p>Lee el siguiente fragmento autobiogr√°fico y en tu cuaderno:</p>");
      w.document.write("<ol>");
      w.document.write("<li>Subraya un ejemplo de <strong>punto y seguido</strong> y uno de <strong>punto y aparte</strong>.</li>");
      w.document.write("<li>Encierra en un c√≠rculo los <strong>dos puntos</strong> que aparecen.</li>");
      w.document.write("</ol>");
      w.document.write("<p class='small'>Me llamo Sof√≠a y nac√≠ un d√≠a lluvioso de septiembre. Cuando ten√≠a ocho a√±os: ocurri√≥ algo que nunca voy a olvidar: particip√© por primera vez en la escolta de la escuela. Esa ma√±ana estaba muy nerviosa, mi mam√° me pein√≥ con dos trenzas apretadas, prepar√≥ mi uniforme y me dijo: ‚ÄúConf√≠o en ti, hazlo con calma‚Äù.</p>");

      w.document.write("<h2>Parte B. Ordena y punt√∫a</h2>");
      w.document.write("<p>Reescribe correctamente las siguientes oraciones en tu cuaderno, usando comas, puntos y seguido, puntos y aparte y dos puntos.</p>");
      w.document.write("<ol>");
      w.document.write("<li>cuando era peque√±o viv√≠a con mis abuelos ellos me ense√±aron a levantarme temprano y ayudar en la casa</li>");
      w.document.write("<li>recuerdo tres cosas muy importantes de mi infancia jugar futbol en el patio cuidar a los animales y acompa√±ar a mi abuelo a la labor</li>");
      w.document.write("<li>el d√≠a que entr√© a quinto grado me sent√≠a nervioso conoc√≠ nuevos compa√±eros la maestra nos dio la bienvenida y dijo ma√±ana comenzaremos un proyecto sobre nuestras historias</li>");
      w.document.write("</ol>");

      w.document.write("<h2>Parte C. Escribe tu autobiograf√≠a</h2>");
      w.document.write("<p>Escribe un texto autobiogr√°fico sobre un momento importante de tu vida (entre 1 y 3 p√°rrafos). No olvides usar comas, puntos y seguido, puntos y aparte y dos puntos.</p>");
      for(let i=0;i<6;i++){
        w.document.write("<p class='vf-item'>________________________________________________________________________________</p>");
      }

      w.document.write("</body></html>");
      w.document.close();
      w.print();
    });
  </script>
</body>
</html>
