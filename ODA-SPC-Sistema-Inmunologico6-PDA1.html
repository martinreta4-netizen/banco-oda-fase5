<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>ODA ‚Äì Sistema inmunol√≥gico (Saberes y Pensamiento Cient√≠fico 6.¬∫)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root{
      --primary:#1d4ed8;
      --primary-soft:#dbeafe;
      --accent:#0ea5e9;
      --bg:#f3f4f6;
      --card:#ffffff;
      --text:#0f172a;
      --muted:#6b7280;
      --border:#e5e7eb;
      --shadow:0 16px 35px rgba(15,23,42,.14);
    }
    *{
      box-sizing:border-box;
      margin:0;
      padding:0;
    }
    body{
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      background:radial-gradient(circle at top,#e0f2fe 0,#eff6ff 38%,#e5e7eb 100%);
      color:var(--text);
      min-height:100vh;
      padding:16px;
      display:flex;
      justify-content:center;
    }
    .oda-shell{
      width:100%;
      max-width:1160px;
      background:rgba(255,255,255,.92);
      border-radius:20px;
      box-shadow:var(--shadow);
      border:1px solid rgba(148,163,184,.35);
      backdrop-filter:blur(10px);
      padding:18px 18px 22px;
      display:flex;
      flex-direction:column;
      gap:14px;
    }
    header{
      display:flex;
      flex-wrap:wrap;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      border-bottom:1px solid var(--border);
      padding-bottom:10px;
    }
    .logo-block{
      display:flex;
      align-items:center;
      gap:10px;
    }
    .logo-block img{
      height:50px;
      width:auto;
      object-fit:contain;
    }
    .title-block{
      flex:1;
      min-width:220px;
    }
    .title-block h1{
      font-size:1.15rem;
      color:#0f172a;
      margin-bottom:4px;
    }
    .title-block p{
      font-size:.82rem;
      color:var(--muted);
      line-height:1.25;
    }
    .chips{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      margin-top:6px;
    }
    .chip{
      font-size:.72rem;
      padding:3px 8px;
      border-radius:999px;
      background:var(--primary-soft);
      color:#1e3a8a;
      border:1px solid rgba(37,99,235,.25);
      display:inline-flex;
      align-items:center;
      gap:5px;
    }
    .chip strong{
      font-weight:600;
    }
    .author-block{
      font-size:.76rem;
      color:var(--muted);
      text-align:right;
      min-width:190px;
    }

    main{
      display:grid;
      grid-template-columns: minmax(0,2.1fr) minmax(260px,1fr);
      gap:14px;
      margin-top:6px;
    }

    .card{
      background:var(--card);
      border-radius:16px;
      border:1px solid var(--border);
      box-shadow:0 8px 16px rgba(15,23,42,.04);
      padding:10px 12px;
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .card-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:6px;
      margin-bottom:4px;
      flex-wrap:wrap;
    }
    .card-title{
      display:flex;
      align-items:center;
      gap:6px;
      font-size:.9rem;
      font-weight:600;
    }
    .card-title .icon{
      font-size:1.15rem;
    }
    .card-sub{
      font-size:.74rem;
      color:var(--muted);
    }
    .card-body{
      font-size:.84rem;
      color:var(--muted);
    }

    .step-tabs{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      margin-bottom:8px;
    }
    .step-tab{
      flex:1;
      min-width:110px;
      border-radius:999px;
      padding:6px 10px;
      border:1px solid #bfdbfe;
      background:#eff6ff;
      font-size:.78rem;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:4px;
      cursor:pointer;
      transition:all .17s ease;
    }
    .step-tab span.step-index{
      width:18px;
      height:18px;
      border-radius:999px;
      background:#1d4ed8;
      color:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:.7rem;
      font-weight:600;
    }
    .step-tab.active{
      background:#1d4ed8;
      color:#e0f2fe;
      border-color:#1d4ed8;
      box-shadow:0 6px 15px rgba(37,99,235,.35);
    }
    .step-tab.active span.step-index{
      background:#eff6ff;
      color:#1d4ed8;
    }

    .step-panel{
      display:none;
      animation:fadeIn .22s ease-out;
    }
    .step-panel.active{
      display:block;
    }
    @keyframes fadeIn{
      from{opacity:0;transform:translateY(4px);}
      to{opacity:1;transform:translateY(0);}
    }

    .info-box{
      background:#eff6ff;
      border-radius:12px;
      padding:8px 9px;
      border:1px solid #bfdbfe;
      display:flex;
      gap:6px;
      align-items:flex-start;
      margin-bottom:8px;
    }
    .info-box span{
      font-size:1.1rem;
    }
    .info-box p{
      font-size:.8rem;
      color:#1e40af;
      line-height:1.3;
    }

    .columns-2{
      display:grid;
      grid-template-columns: minmax(0,1.05fr) minmax(0,1.05fr);
      gap:10px;
      margin-top:6px;
    }
    .schema-card{
      border-radius:14px;
      border:1px dashed #cbd5f5;
      padding:8px 9px;
      background:#f9fafb;
    }
    .schema-title{
      font-size:.86rem;
      font-weight:600;
      color:#1d4ed8;
      margin-bottom:4px;
    }
    .schema-sub{
      font-size:.76rem;
      color:var(--muted);
      margin-bottom:6px;
    }
    .pill-list{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
    }
    .pill{
      padding:4px 8px;
      border-radius:999px;
      border:1px solid #cbd5f5;
      background:#eff6ff;
      font-size:.75rem;
      color:#1e3a8a;
      cursor:pointer;
      user-select:none;
      transition:all .15s ease;
    }
    .pill.active{
      background:#1d4ed8;
      color:#e0f2fe;
      box-shadow:0 4px 10px rgba(37,99,235,.35);
      border-color:#1d4ed8;
    }

    .schema-grid{
      display:grid;
      grid-template-columns:minmax(0,1.1fr) minmax(0,1.1fr);
      gap:8px;
      margin-top:6px;
    }
    .schema-col-title{
      font-size:.8rem;
      font-weight:600;
      color:#1e3a8a;
      margin-bottom:4px;
    }
    .schema-item{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:6px;
      margin-bottom:4px;
      font-size:.78rem;
    }
    .schema-item label{
      flex:1;
    }
    .schema-item select{
      font-size:.76rem;
      padding:3px 4px;
      border-radius:999px;
      border:1px solid #cbd5f5;
      background:#ffffff;
      min-width:110px;
    }

    .question-block{
      margin-top:4px;
      padding:6px 8px;
      border-radius:10px;
      border:1px solid #e5e7eb;
      background:#f9fafb;
    }
    .question-block + .question-block{
      margin-top:6px;
    }
    .question-title{
      font-weight:600;
      font-size:.84rem;
      margin-bottom:3px;
      color:#1e3a8a;
    }
    .question-block p{
      font-size:.8rem;
      margin-bottom:2px;
    }
    .options{
      margin-top:3px;
      display:flex;
      flex-direction:column;
      gap:2px;
      font-size:.8rem;
    }
    .options label{
      display:flex;
      align-items:center;
      gap:4px;
      cursor:pointer;
    }

    .btn-row{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      margin-top:9px;
    }
    .btn{
      border-radius:999px;
      border:none;
      padding:7px 12px;
      font-size:.8rem;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:6px;
      font-weight:500;
      transition:all .16s ease;
      white-space:nowrap;
    }
    .btn-primary{
      background:linear-gradient(135deg,#1d4ed8,#0ea5e9);
      color:#eff6ff;
      box-shadow:0 8px 16px rgba(37,99,235,.45);
    }
    .btn-primary:hover{
      box-shadow:0 10px 22px rgba(30,64,175,.6);
      transform:translateY(-1px);
    }
    .btn-outline{
      background:#ffffff;
      border:1px solid #cbd5f5;
      color:#1e3a8a;
    }
    .btn-outline:hover{
      background:#eff6ff;
    }

    .status{
      margin-top:7px;
      border-radius:12px;
      padding:6px 8px;
      font-size:.78rem;
      display:flex;
      gap:6px;
      align-items:flex-start;
    }
    .status span.icon{
      font-size:1rem;
    }
    .status-info{
      background:#eff6ff;
      border:1px solid #bfdbfe;
      color:#1e3a8a;
    }
    .status-ok{
      background:#ecfdf5;
      border:1px solid #6ee7b7;
      color:#166534;
    }
    .status-warn{
      background:#fef9c3;
      border:1px solid #facc15;
      color:#92400e;
    }

    .right-column{
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .student-row{
      display:flex;
      flex-direction:column;
      gap:4px;
      font-size:.8rem;
      margin-bottom:4px;
    }
    .student-row input{
      padding:5px 8px;
      border-radius:999px;
      border:1px solid #cbd5f5;
      font-size:.8rem;
      width:100%;
    }

    .avatar-card{
      display:flex;
      gap:9px;
      align-items:flex-start;
    }
    .avatar-circle{
      flex-shrink:0;
      width:56px;
      height:56px;
      border-radius:999px;
      background:radial-gradient(circle at 30% 20%,#e0f2fe,#1d4ed8);
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      border:2px solid #bfdbfe;
      box-shadow:0 6px 14px rgba(15,23,42,.35);
    }
    .avatar-circle img{
      width:100%;
      height:100%;
      object-fit:cover;
    }
    .avatar-text{
      font-size:.8rem;
      color:#4b5563;
    }
    .avatar-text strong{
      display:block;
      color:#1e3a8a;
      margin-bottom:3px;
    }
    .avatar-steps{
      margin-top:4px;
      padding-left:15px;
      font-size:.78rem;
      color:#374151;
    }
    .avatar-steps li{
      margin-bottom:2px;
    }
    .badge-step{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      width:16px;
      height:16px;
      border-radius:999px;
      background:#1d4ed8;
      color:#eff6ff;
      font-size:.66rem;
      margin-right:3px;
    }

    .pda-text{
      font-size:.78rem;
      color:#374151;
      line-height:1.35;
      max-height:120px;
      overflow:auto;
    }

    audio{
      width:100%;
      margin-top:4px;
    }

    .corner-logo{
      position:fixed;
      right:10px;
      bottom:10px;
      width:70px;
      opacity:.9;
      z-index:40;
    }

    .print-note{
      font-size:.72rem;
      color:#9ca3af;
      margin-top:4px;
    }

    @media(max-width:860px){
      main{
        grid-template-columns:1fr;
      }
      .author-block{
        text-align:left;
      }
      .corner-logo{
        width:56px;
      }
    }
    @media(max-width:600px){
      .oda-shell{
        padding:14px 10px 16px;
        border-radius:16px;
      }
      header{
        flex-direction:column;
        align-items:flex-start;
      }
    }

    /* estilos para hoja de resultados impresa */
    .result-good{
      color:#1d4ed8;
      font-weight:600;
    }
    .result-need{
      color:#b91c1c;
      font-weight:600;
    }

    /* copyright */
    .copyright{
      margin-top:4px;
      font-size:.7rem;
      color:#9ca3af;
      text-align:right;
    }
  </style>
</head>
<body>
  <div class="oda-shell">
    <header>
      <div class="logo-block">
        <img src="sep_logo.png" alt="SEP">
      </div>
      <div class="title-block">
        <h1>ODA ‚Äì Sistema inmunol√≥gico: las defensas de nuestro cuerpo</h1>
        <p>Fase 5 ¬∑ Sexto grado ¬∑ Campo formativo: Saberes y Pensamiento Cient√≠fico</p>
        <div class="chips">
          <span class="chip">Contenido: <strong>Estructura y funcionamiento del cuerpo humano</strong></span>
          <span class="chip">PDA: <strong>Sistema inmunol√≥gico y defensa del cuerpo</strong></span>
          <span class="chip">Ejes articuladores: Vida saludable ¬∑ Pensamiento cr√≠tico ¬∑ Interculturalidad cr√≠tica</span>
        </div>
      </div>
      <div class="author-block">
        <strong>Autor: Mtro. Mart√≠n Reta</strong><br>
        Escuela Primaria ‚ÄúGral. L√°zaro C√°rdenas‚Äù<br>
        Ejido Santa Mar√≠a, Pesquer√≠a, N.L.
      </div>
    </header>

    <main>
      <!-- COLUMNA IZQUIERDA -->
      <section>
        <div class="card">
          <div class="card-header">
            <div class="card-title">
              <span class="icon">üß≠</span>
              <span>Ruta de trabajo</span>
            </div>
            <div class="card-sub">Sigue los pasos en orden</div>
          </div>
          <div class="card-body">
            <div class="step-tabs">
              <button class="step-tab active" data-step="explora">
                <span class="step-index">1</span>
                <span>Explora las defensas</span>
                <span>üëÅÔ∏è</span>
              </button>
              <button class="step-tab" data-step="esquemas">
                <span class="step-index">2</span>
                <span>Esquemas interactivos</span>
                <span>üß¨</span>
              </button>
              <button class="step-tab" data-step="evalua">
                <span class="step-index">3</span>
                <span>Eval√∫ate</span>
                <span>‚úÖ</span>
              </button>
            </div>

            <!-- PANEL 1 -->
            <div class="step-panel active" id="panel-explora">
              <div class="info-box">
                <span>üí°</span>
                <p>Antes de resolver actividades, lee con atenci√≥n c√≥mo participa el sistema inmunol√≥gico en la defensa del cuerpo.</p>
              </div>
              <p style="font-size:.83rem; margin-bottom:6px;">
                El <strong>sistema inmunol√≥gico</strong> est√° formado por c√©lulas, tejidos y √≥rganos que trabajan juntos para proteger el cuerpo cuando entran <strong>virus</strong>, <strong>bacterias</strong> u otros agentes que causan enfermedades.
              </p>
              <div class="columns-2">
                <div class="schema-card">
                  <div class="schema-title">1. Niveles de defensa</div>
                  <div class="schema-sub">Haz clic en los elementos que creas que forman parte de las defensas.</div>
                  <div class="pill-list" id="pillDefenseList">
                    <span class="pill" data-type="defensa">Piel</span>
                    <span class="pill" data-type="defensa">L√°grimas</span>
                    <span class="pill" data-type="defensa">Moco nasal</span>
                    <span class="pill" data-type="no-defensa">Refresco</span>
                    <span class="pill" data-type="defensa">√Åcidos del est√≥mago</span>
                    <span class="pill" data-type="no-defensa">Televisi√≥n</span>
                    <span class="pill" data-type="defensa">Pelillos de la nariz</span>
                  </div>
                  <p style="font-size:.76rem; margin-top:6px; color:#4b5563;">
                    <strong>Observa:</strong> algunas defensas son <em>barreras f√≠sicas</em> (como la piel) y otras son <em>sustancias</em> (como los √°cidos del est√≥mago).
                  </p>
                </div>
                <div class="schema-card">
                  <div class="schema-title">2. ¬øQu√© pasa cuando entra un germen?</div>
                  <div class="schema-sub">Ordena mentalmente estas etapas mientras lees.</div>
                  <ol style="font-size:.78rem; color:#374151; margin-left:16px; display:flex; flex-direction:column; gap:2px;">
                    <li>Un germen entra al cuerpo (por la nariz, boca o una herida).</li>
                    <li>El sistema inmunol√≥gico lo reconoce como algo extra√±o.</li>
                    <li>Algunas c√©lulas, como los <strong>macr√≥fagos</strong>, lo ‚Äúcomen‚Äù o lo destruyen.</li>
                    <li>Otras c√©lulas, como los <strong>linfocitos</strong>, producen <strong>anticuerpos</strong>.</li>
                    <li>Si el mismo germen vuelve a entrar, el cuerpo lo recuerda y responde m√°s r√°pido.</li>
                  </ol>
                </div>
              </div>
            </div>

            <!-- PANEL 2: ESQUEMAS -->
            <div class="step-panel" id="panel-esquemas">
              <div class="info-box">
                <span>üß¨</span>
                <p>Completa los esquemas para reconocer <strong>c√©lulas</strong> y <strong>√≥rganos</strong> del sistema inmunol√≥gico y c√≥mo se relacionan.</p>
              </div>
              <div class="schema-card">
                <div class="schema-title">Esquema 1. ¬øC√©lula o √≥rgano?</div>
                <div class="schema-sub">Clasifica cada elemento del sistema inmunol√≥gico.</div>
                <div class="schema-grid">
                  <div>
                    <div class="schema-col-title">Elemento</div>
                    <div class="schema-item">
                      <label>Macr√≥fagos</label>
                      <select data-correct="c√©lula">
                        <option value="">Selecciona...</option>
                        <option value="c√©lula">C√©lula</option>
                        <option value="√≥rgano">√ìrgano</option>
                      </select>
                    </div>
                    <div class="schema-item">
                      <label>Linfocitos B</label>
                      <select data-correct="c√©lula">
                        <option value="">Selecciona...</option>
                        <option value="c√©lula">C√©lula</option>
                        <option value="√≥rgano">√ìrgano</option>
                      </select>
                    </div>
                    <div class="schema-item">
                      <label>Linfocitos T</label>
                      <select data-correct="c√©lula">
                        <option value="">Selecciona...</option>
                        <option value="c√©lula">C√©lula</option>
                        <option value="√≥rgano">√ìrgano</option>
                      </select>
                    </div>
                    <div class="schema-item">
                      <label>Anticuerpos</label>
                      <select data-correct="c√©lula">
                        <option value="">Selecciona...</option>
                        <option value="c√©lula">C√©lula / mol√©cula</option>
                        <option value="√≥rgano">√ìrgano</option>
                      </select>
                    </div>
                  </div>
                  <div>
                    <div class="schema-col-title">√ìrganos relacionados</div>
                    <div class="schema-item">
                      <label>Ganglios linf√°ticos</label>
                      <select data-correct="√≥rgano">
                        <option value="">Selecciona...</option>
                        <option value="c√©lula">C√©lula</option>
                        <option value="√≥rgano">√ìrgano</option>
                      </select>
                    </div>
                    <div class="schema-item">
                      <label>M√©dula √≥sea</label>
                      <select data-correct="√≥rgano">
                        <option value="">Selecciona...</option>
                        <option value="c√©lula">C√©lula</option>
                        <option value="√≥rgano">√ìrgano</option>
                      </select>
                    </div>
                    <div class="schema-item">
                      <label>Bazo</label>
                      <select data-correct="√≥rgano">
                        <option value="">Selecciona...</option>
                        <option value="c√©lula">C√©lula</option>
                        <option value="√≥rgano">√ìrgano</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>

              <div class="schema-card" style="margin-top:8px;">
                <div class="schema-title">Esquema 2. Defensa ante una infecci√≥n</div>
                <div class="schema-sub">Relaciona cada acci√≥n con el tipo de c√©lula que participa principalmente.</div>
                <div class="question-block">
                  <div class="question-title">Acci√≥n 1</div>
                  <p>‚ÄúRodean al germen y lo destruyen como si se lo comieran‚Äù.</p>
                  <div class="options">
                    <label><input type="radio" name="acc1" value="macr√≥fagos"> Macr√≥fagos</label>
                    <label><input type="radio" name="acc1" value="linfocitos"> Linfocitos</label>
                  </div>
                </div>
                <div class="question-block">
                  <div class="question-title">Acci√≥n 2</div>
                  <p>‚ÄúProducen anticuerpos especiales contra un germen‚Äù.</p>
                  <div class="options">
                    <label><input type="radio" name="acc2" value="linfocitosB"> Linfocitos B</label>
                    <label><input type="radio" name="acc2" value="macr√≥fagos"> Macr√≥fagos</label>
                  </div>
                </div>
                <div class="question-block">
                  <div class="question-title">Acci√≥n 3</div>
                  <p>‚ÄúRecuerdan al germen para responder m√°s r√°pido la pr√≥xima vez‚Äù.</p>
                  <div class="options">
                    <label><input type="radio" name="acc3" value="memoria"> C√©lulas de memoria</label>
                    <label><input type="radio" name="acc3" value="piel"> C√©lulas de la piel</label>
                  </div>
                </div>
              </div>

              <div class="btn-row">
                <button class="btn btn-primary" id="btnCheckSchemas">üîé Comprobar esquemas</button>
              </div>
              <div id="statusSchemas" class="status status-info">
                <span class="icon">‚ÑπÔ∏è</span>
                <div>Llena todas las casillas y selecciona una opci√≥n en cada acci√≥n. Despu√©s haz clic en <strong>‚ÄúComprobar esquemas‚Äù</strong>.</div>
              </div>
            </div>

            <!-- PANEL 3: EVAL√öA -->
            <div class="step-panel" id="panel-evalua">
              <div class="info-box">
                <span>‚úÖ</span>
                <p>Responde el cuestionario para revisar qu√© tanto comprendes la participaci√≥n del sistema inmunol√≥gico.</p>
              </div>
              <div class="question-block">
                <div class="question-title">1. ¬øCu√°l es la funci√≥n principal del sistema inmunol√≥gico?</div>
                <div class="options">
                  <label><input type="radio" name="q1" value="a"> Transportar ox√≠geno a todas las c√©lulas.</label>
                  <label><input type="radio" name="q1" value="b"> Defender al cuerpo de infecciones y enfermedades.</label>
                  <label><input type="radio" name="q1" value="c"> Controlar los movimientos del cuerpo.</label>
                </div>
              </div>
              <div class="question-block">
                <div class="question-title">2. ¬øQu√© enunciado describe mejor a los anticuerpos?</div>
                <div class="options">
                  <label><input type="radio" name="q2" value="a"> Son g√©rmenes que enferman al cuerpo.</label>
                  <label><input type="radio" name="q2" value="b"> Son sustancias producidas por el cuerpo para reconocer y atacar g√©rmenes.</label>
                  <label><input type="radio" name="q2" value="c"> Son partes de los pulmones que ayudan a respirar.</label>
                </div>
              </div>
              <div class="question-block">
                <div class="question-title">3. ¬øQu√© hacen las vacunas?</div>
                <div class="options">
                  <label><input type="radio" name="q3" value="a"> Evitan que el coraz√≥n lata m√°s r√°pido.</label>
                  <label><input type="radio" name="q3" value="b"> Ense√±an al sistema inmunol√≥gico a reconocer ciertos g√©rmenes.</label>
                  <label><input type="radio" name="q3" value="c"> Sustituyen por completo a las defensas del cuerpo.</label>
                </div>
              </div>
              <div class="question-block">
                <div class="question-title">4. ¬øCu√°l de estas acciones <strong>favorece</strong> la salud del sistema inmunol√≥gico?</div>
                <div class="options">
                  <label><input type="radio" name="q4" value="a"> Dormir poco y consumir muchos refrescos azucarados.</label>
                  <label><input type="radio" name="q4" value="b"> Mantener higiene, alimentarse de forma saludable y hacer actividad f√≠sica.</label>
                  <label><input type="radio" name="q4" value="c"> No vacunarse para ‚Äúfortalecer‚Äù el cuerpo.</label>
                </div>
              </div>

              <div class="btn-row">
                <button class="btn btn-primary" id="btnCheckQuiz">üìä Comprobar cuestionario</button>
              </div>
              <div id="statusQuiz" class="status status-info">
                <span class="icon">‚ÑπÔ∏è</span>
                <div>Marca una opci√≥n en cada pregunta y luego haz clic en <strong>‚ÄúComprobar cuestionario‚Äù</strong> para ver tu resultado.</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- COLUMNA DERECHA -->
      <aside class="right-column">
        <div class="card">
          <div class="card-header">
            <div class="card-title">
              <span class="icon">üßæ</span>
              <span>Datos del alumno y reportes</span>
            </div>
          </div>
          <div class="card-body">
            <div class="student-row">
              <label for="studentName">Nombre del alumno(a):</label>
              <input type="text" id="studentName" placeholder="Escribe tu nombre aqu√≠">
            </div>
            <div class="btn-row">
              <button class="btn btn-outline" id="btnPrintResults">üñ®Ô∏è Imprimir resultados</button>
              <button class="btn btn-outline" id="btnPrintActivity">üìÑ Imprimir actividad</button>
            </div>
            <p class="print-note">
              La hoja de resultados marcar√° en <span class="result-good">azul</span> los aciertos y en <span class="result-need">rojo</span> las √°reas por mejorar.
            </p>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <div class="card-title">
              <span class="icon">üßë‚Äçüè´</span>
              <span>Avatar gu√≠a ‚Äì Instrucciones</span>
            </div>
          </div>
          <div class="card-body avatar-card">
            <div class="avatar-circle">
              <img src="avatar_guia.png" alt="Avatar del maestro Mart√≠n">
            </div>
            <div class="avatar-text">
              <strong>Hola, soy el maestro Mart√≠n.</strong>
              <p>Te acompa√±ar√© a descubrir c√≥mo se defiende tu cuerpo con ayuda del sistema inmunol√≥gico.</p>
              <ol class="avatar-steps">
                <li><span class="badge-step">1</span> En <strong>‚ÄúExplora las defensas‚Äù</strong> lee la explicaci√≥n y observa los ejemplos.</li>
                <li><span class="badge-step">2</span> En <strong>‚ÄúEsquemas interactivos‚Äù</strong> clasifica c√©lulas y √≥rganos, y completa las acciones.</li>
                <li><span class="badge-step">3</span> En <strong>‚ÄúEval√∫ate‚Äù</strong> responde el cuestionario para revisar tus aprendizajes.</li>
                <li><span class="badge-step">4</span> Cuando termines, escribe tu nombre y <strong>imprime tus resultados y la actividad</strong>.</li>
              </ol>
              <audio controls>
                <source src="inserta_tu_audio_aqui.mp3" type="audio/mpeg">
                Tu navegador no soporta el elemento de audio.
              </audio>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <div class="card-title">
              <span class="icon">üéØ</span>
              <span>PDA (SEP, 2024) ‚Äì Texto literal</span>
            </div>
          </div>
          <div class="card-body">
            <div class="pda-text">
              Explica la participaci√≥n del sistema inmunol√≥gico en la defensa y protecci√≥n del cuerpo humano ante infecciones y enfermedades, algunas de las c√©lulas y √≥rganos que lo conforman, sin profundizar en caracter√≠sticas y funciones espec√≠ficas. Describe los beneficios y practica acciones para fortalecer y cuidar el sistema inmunol√≥gico: vacunaci√≥n, higiene, alimentaci√≥n saludable, consumo de agua simple potable, descanso, actividades f√≠sicas y recreativas. Argumenta la importancia de las vacunas como aportes cient√≠ficos y tecnol√≥gicos para prevenir enfermedades transmisibles y de la Cartilla Nacional de Salud para dar seguimiento a su estado de salud, as√≠ como de pr√°cticas culturales para prevenirlas. Explica los factores que ponen en riesgo la salud y aquellos que la favorecen al analizar diversas situaciones y propone acciones para reducir la propagaci√≥n de enfermedades transmisibles en los entornos familiar, escolar y comunitario.
            </div>
          </div>
        </div>

        <div class="copyright">
          ¬© 2025 ¬∑ Profe Mart√≠n Reta ¬∑ ODA ‚Äì Saberes y Pensamiento Cient√≠fico (Sistema inmunol√≥gico).
        </div>
      </aside>
    </main>
  </div>

  <img src="escudo_escuela.png" alt="Escudo de la escuela" class="corner-logo">

  <script>
    // Navegaci√≥n de pasos
    const tabs = document.querySelectorAll(".step-tab");
    const panels = {
      explora: document.getElementById("panel-explora"),
      esquemas: document.getElementById("panel-esquemas"),
      evalua: document.getElementById("panel-evalua")
    };
    tabs.forEach(btn=>{
      btn.addEventListener("click",()=>{
        tabs.forEach(b=>b.classList.remove("active"));
        btn.classList.add("active");
        const step = btn.getAttribute("data-step");
        Object.keys(panels).forEach(k=>panels[k].classList.remove("active"));
        panels[step].classList.add("active");
      });
    });

    // Esquema 1 ‚Äì pills (solo visual)
    document.querySelectorAll("#pillDefenseList .pill").forEach(pill=>{
      pill.addEventListener("click",()=>{
        pill.classList.toggle("active");
      });
    });

    const resultsData = {
      schemas:null,
      quiz:null
    };

    // Comprobar esquemas
    const statusSchemas = document.getElementById("statusSchemas");
    document.getElementById("btnCheckSchemas").addEventListener("click",()=>{
      const selects = document.querySelectorAll('#panel-esquemas select');
      let total = selects.length;
      let answered = 0;
      let correct = 0;

      selects.forEach(sel=>{
        if(sel.value!==""){
          answered++;
          if(sel.value.toLowerCase() === sel.dataset.correct.toLowerCase()){
            correct++;
          }
        }
      });

      let acc1 = document.querySelector('input[name="acc1"]:checked');
      let acc2 = document.querySelector('input[name="acc2"]:checked');
      let acc3 = document.querySelector('input[name="acc3"]:checked');
      let totalAcc = 3;
      let answeredAcc = 0;
      let correctAcc = 0;

      if(acc1){answeredAcc++; if(acc1.value==="macr√≥fagos") correctAcc++;}
      if(acc2){answeredAcc++; if(acc2.value==="linfocitosB") correctAcc++;}
      if(acc3){answeredAcc++; if(acc3.value==="memoria") correctAcc++;}

      const totalItems = total + totalAcc;
      const totalAnswered = answered + answeredAcc;
      const totalCorrect = correct + correctAcc;

      resultsData.schemas = {
        total: totalItems,
        answered: totalAnswered,
        correct: totalCorrect
      };

      statusSchemas.className = "status";
      if(totalAnswered < totalItems){
        statusSchemas.classList.add("status-warn");
        statusSchemas.innerHTML = '<span class="icon">‚ö†Ô∏è</span><div>Te faltan elementos por completar. Responde todas las casillas y acciones para obtener tu resultado completo.</div>';
      }else{
        const pct = Math.round((totalCorrect/totalItems)*100);
        statusSchemas.classList.add("status-ok");
        statusSchemas.innerHTML = '<span class="icon">‚úÖ</span><div>Has completado los esquemas. Respuestas correctas: <strong>'+totalCorrect+'/'+totalItems+'</strong> ('+pct+'%).</div>';
      }
    });

    // Comprobar cuestionario
    const statusQuiz = document.getElementById("statusQuiz");
    document.getElementById("btnCheckQuiz").addEventListener("click",()=>{
      const answers = {
        q1:"b",
        q2:"b",
        q3:"b",
        q4:"b"
      };
      let total = 4;
      let answered = 0;
      let correct = 0;
      Object.keys(answers).forEach(q=>{
        const sel = document.querySelector('input[name="'+q+'"]:checked');
        if(sel){
          answered++;
          if(sel.value===answers[q]) correct++;
        }
      });

      resultsData.quiz = {
        total: total,
        answered: answered,
        correct: correct
      };

      statusQuiz.className = "status";
      if(answered < total){
        statusQuiz.classList.add("status-warn");
        statusQuiz.innerHTML = '<span class="icon">‚ö†Ô∏è</span><div>Te faltan preguntas por responder. Marca una opci√≥n en cada pregunta.</div>';
      }else{
        const pct = Math.round((correct/total)*100);
        statusQuiz.classList.add("status-ok");
        statusQuiz.innerHTML = '<span class="icon">‚úÖ</span><div>Has completado el cuestionario. Respuestas correctas: <strong>'+correct+'/'+total+'</strong> ('+pct+'%).</div>';
      }
    });

    // Imprimir resultados
    document.getElementById("btnPrintResults").addEventListener("click",()=>{
      const name = document.getElementById("studentName").value || "Sin nombre";
      const today = new Date();
      const dateStr = today.toLocaleDateString("es-MX",{
        year:"numeric",month:"2-digit",day:"2-digit"
      });

      let schemas = resultsData.schemas;
      let quiz = resultsData.quiz;

      const win = window.open("","_blank","width=900,height=700");
      win.document.write(`
        <!DOCTYPE html>
        <html lang="es">
        <head>
          <meta charset="UTF-8">
          <title>Resultados ‚Äì Sistema inmunol√≥gico</title>
          <style>
            body{font-family:system-ui,-apple-system,"Segoe UI",sans-serif;padding:24px;background:#f3f4f6;color:#111827;}
            h1{font-size:1.25rem;margin-bottom:4px;color:#1f2937;}
            h2{font-size:1rem;margin-top:16px;margin-bottom:4px;color:#1d4ed8;}
            .meta{font-size:.85rem;color:#4b5563;margin-bottom:10px;}
            .box{background:#ffffff;border-radius:12px;border:1px solid #e5e7eb;padding:10px 12px;margin-top:8px;}
            .good{color:#1d4ed8;font-weight:600;}
            .need{color:#b91c1c;font-weight:600;}
            ul{font-size:.9rem;color:#374151;margin-left:18px;}
            .badge{display:inline-block;padding:2px 8px;border-radius:999px;font-size:.75rem;}
            .badge-ok{background:#d1fae5;color:#166534;}
            .badge-mid{background:#fef9c3;color:#92400e;}
            .badge-low{background:#fee2e2;color:#b91c1c;}
            .footer{margin-top:16px;font-size:.75rem;color:#9ca3af;text-align:right;}
          </style>
        </head>
        <body>
          <h1>Resultados de la ODA ‚Äì Sistema inmunol√≥gico</h1>
          <div class="meta">
            Alumno(a): <strong>${name}</strong><br>
            Fecha: ${dateStr}<br>
            Campo formativo: Saberes y Pensamiento Cient√≠fico ‚Äì Sexto grado
          </div>

          <h2>1. Esquemas interactivos</h2>
          <div class="box">
      `);

      if(!schemas){
        win.document.write(`<p>No se registr√≥ informaci√≥n. <span class="need">El alumno no ha comprobado los esquemas.</span></p>`);
      }else{
        const pct = Math.round((schemas.correct/schemas.total)*100);
        let badgeClass = "badge-ok";
        if(pct<75 && pct>=50) badgeClass="badge-mid";
        if(pct<50) badgeClass="badge-low";
        win.document.write(`
          <p>Resultado: <span class="good">${schemas.correct}/${schemas.total}</span> aciertos (${pct}%) 
          <span class="badge ${badgeClass}">${pct>=75?"Adecuado":(pct>=50?"En proceso":"Requiere apoyo")}</span></p>
          <ul>
            <li class="${pct>=75?"good":"need"}">Identificaci√≥n de c√©lulas y √≥rganos del sistema inmunol√≥gico.</li>
            <li class="${pct>=75?"good":"need"}">Comprensi√≥n b√°sica de c√≥mo act√∫an las defensas ante una infecci√≥n.</li>
          </ul>
        `);
      }

      win.document.write(`
          </div>
          <h2>2. Cuestionario ‚ÄúEval√∫ate‚Äù</h2>
          <div class="box">
      `);

      if(!quiz){
        win.document.write(`<p>No se registr√≥ informaci√≥n. <span class="need">El alumno no ha comprobado el cuestionario.</span></p>`);
      }else{
        const pctQ = Math.round((quiz.correct/quiz.total)*100);
        let badgeClassQ = "badge-ok";
        if(pctQ<75 && pctQ>=50) badgeClassQ="badge-mid";
        if(pctQ<50) badgeClassQ="badge-low";
        win.document.write(`
          <p>Resultado: <span class="good">${quiz.correct}/${quiz.total}</span> aciertos (${pctQ}%) 
          <span class="badge ${badgeClassQ}">${pctQ>=75?"Adecuado":(pctQ>=50?"En proceso":"Requiere apoyo")}</span></p>
          <ul>
            <li class="${pctQ>=75?"good":"need"}">Comprende la funci√≥n del sistema inmunol√≥gico en la defensa del cuerpo.</li>
            <li class="${pctQ>=75?"good":"need"}">Reconoce el papel de las vacunas y los buenos h√°bitos para cuidar la salud.</li>
          </ul>
        `);
      }

      win.document.write(`
          </div>
          <h2>3. Observaciones del docente</h2>
          <div class="box">
            <p>__________________________________________________________________________</p>
            <p>__________________________________________________________________________</p>
            <p>__________________________________________________________________________</p>
          </div>
          <div class="footer">
            ODA ‚Äì Sistema inmunol√≥gico ¬∑ Profe Mart√≠n Reta ¬∑ Saberes y Pensamiento Cient√≠fico (Fase 5)
          </div>
          <script>window.print();<\/script>
        </body>
        </html>
      `);
      win.document.close();
    });

    // Imprimir actividad (distinta a las actividades internas)
    document.getElementById("btnPrintActivity").addEventListener("click",()=>{
      const name = document.getElementById("studentName").value || "________________";
      const win = window.open("","_blank","width=900,height=700");
      win.document.write(`
        <!DOCTYPE html>
        <html lang="es">
        <head>
          <meta charset="UTF-8">
          <title>Actividad imprimible ‚Äì Sistema inmunol√≥gico</title>
          <style>
            body{font-family:system-ui,-apple-system,"Segoe UI",sans-serif;padding:24px;background:#ffffff;color:#111827;}
            h1{font-size:1.25rem;margin-bottom:4px;color:#1f2937;}
            h2{font-size:1rem;margin-top:16px;margin-bottom:4px;color:#1d4ed8;}
            .meta{font-size:.9rem;color:#4b5563;margin-bottom:10px;}
            ol{font-size:.9rem;color:#111827;margin-left:18px;}
            .line{border-bottom:1px solid #9ca3af;margin:6px 0 8px;}
            table{width:100%;border-collapse:collapse;font-size:.9rem;margin-top:4px;}
            td,th{border:1px solid #9ca3af;padding:6px 8px;vertical-align:top;}
          </style>
        </head>
        <body>
          <h1>Actividad imprimible ‚Äì Defensores del cuerpo humano</h1>
          <div class="meta">
            Nombre del alumno(a): ${name}<br>
            Grado: 6.¬∫ ¬∑ Campo formativo: Saberes y Pensamiento Cient√≠fico
          </div>

          <h2>1. Completa las oraciones</h2>
          <ol>
            <li>El sistema inmunol√≥gico se encarga de ________________________________________________________.</li>
            <div class="line"></div>
            <li>Los <strong>macr√≥fagos</strong> ayudan a defender el cuerpo porque ____________________________________________.</li>
            <div class="line"></div>
            <li>Las vacunas son importantes porque ____________________________________________________________.</li>
            <div class="line"></div>
            <li>Una acci√≥n que favorece la salud de mi sistema inmunol√≥gico es ______________________________________.</li>
            <div class="line"></div>
          </ol>

          <h2>2. Relaciona con una l√≠nea</h2>
          <p>En tu cuaderno o sobre esta hoja, traza una l√≠nea para unir cada elemento con su funci√≥n.</p>
          <table>
            <tr>
              <th>Elemento</th>
              <th>Funci√≥n</th>
            </tr>
            <tr>
              <td>
                a) Macr√≥fagos<br><br>
                b) Vacunas<br><br>
                c) Higiene diaria<br><br>
                d) Cartilla Nacional de Salud
              </td>
              <td>
                1) Registro donde se anotan las vacunas y revisiones de salud.<br><br>
                2) C√©lulas que rodean y destruyen g√©rmenes que entran al cuerpo.<br><br>
                3) Ayudan a que el cuerpo ‚Äúaprenda‚Äù a defenderse de ciertos g√©rmenes.<br><br>
                4) Lavarse las manos, ba√±arse y cepillarse los dientes para evitar infecciones.
              </td>
            </tr>
          </table>

          <h2>3. Dibuja</h2>
          <p>En el espacio de abajo, dibuja una escena donde el sistema inmunol√≥gico est√° defendiendo al cuerpo (por ejemplo, macr√≥fagos enfrentando a un virus o linfocitos produciendo anticuerpos).</p>
          <div style="border:1px solid #9ca3af;height:200px;margin-top:6px;"></div>

          <script>window.print();<\/script>
        </body>
        </html>
      `);
      win.document.close();
    });
  </script>
</body>
</html>
