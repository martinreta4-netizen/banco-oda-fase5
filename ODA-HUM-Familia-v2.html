
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>ODA - De lo humano a lo comunitario - Familia</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --morado-oscuro: #5a2a82;
      --morado-medio: #7b3fb3;
      --morado-claro: #f3e9ff;
      --acento-rosa: #f78fb3;
      --gris-claro: #f5f5f7;
      --texto-oscuro: #222222;
      --bordes-suaves: 18px;
      --sombra-suave: 0 10px 25px rgba(0, 0, 0, 0.08);
      --transition: all 0.25s ease;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top left, #fdf8ff 0, #f5f0ff 40%, #ffffff 100%);
      color: var(--texto-oscuro);
    }

    header {
      background: linear-gradient(120deg, var(--morado-oscuro), var(--morado-medio));
      color: white;
      padding: 1.2rem 1.5rem;
      box-shadow: 0 4px 18px rgba(0, 0, 0, 0.2);
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .header-content {
      max-width: 1100px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
    }

    .logos {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .logo-box {
      width: 60px;
      height: 60px;
      border-radius: 14px;
      background: rgba(255, 255, 255, 0.15);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.65rem;
      text-align: center;
      padding: 0.25rem;
    }

    .titulo-oda h1 {
      margin: 0;
      font-size: 1.3rem;
      letter-spacing: 0.5px;
    }

    .titulo-oda p {
      margin: 0.15rem 0 0;
      font-size: 0.8rem;
      opacity: 0.9;
    }

    .avatar-area {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .avatar-circle {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.22);
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }

    .avatar-circle img {
      max-width: 100%;
      height: auto;
      display: block;
    }

    .voz-btn {
      background: white;
      color: var(--morado-oscuro);
      border-radius: 999px;
      border: none;
      padding: 0.35rem 0.8rem;
      font-size: 0.75rem;
      display: inline-flex;
      align-items: center;
      gap: 0.3rem;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.12);
      transition: var(--transition);
    }

    .voz-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.18);
    }

    main {
      max-width: 1100px;
      margin: 1.5rem auto 2.5rem;
      padding: 0 1rem 1rem;
    }

    .top-bar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.75rem;
      margin-bottom: 1rem;
      flex-wrap: wrap;
    }

    .student-name {
      display: flex;
      align-items: center;
      gap: 0.4rem;
      background: white;
      padding: 0.4rem 0.6rem;
      border-radius: 999px;
      box-shadow: var(--sombra-suave);
    }

    .student-name label {
      font-size: 0.8rem;
      color: #555;
    }

    .student-name input {
      border: none;
      outline: none;
      background: transparent;
      font-size: 0.9rem;
      min-width: 160px;
    }

    .ejes {
      display: flex;
      flex-wrap: wrap;
      gap: 0.3rem;
      justify-content: flex-end;
    }

    .chip {
      font-size: 0.7rem;
      padding: 0.25rem 0.55rem;
      border-radius: 999px;
      background: var(--morado-claro);
      color: var(--morado-oscuro);
      border: 1px solid rgba(90, 42, 130, 0.18);
    }

    .pasos {
      display: grid;
      grid-template-columns: repeat(5, minmax(0, 1fr));
      gap: 0.5rem;
      margin-bottom: 1.2rem;
    }

    .paso {
      background: white;
      border-radius: var(--bordes-suaves);
      padding: 0.6rem 0.4rem;
      text-align: center;
      font-size: 0.7rem;
      cursor: pointer;
      position: relative;
      box-shadow: var(--sombra-suave);
      opacity: 0.6;
      border: 2px solid transparent;
      transition: var(--transition);
    }

    .paso::before {
      content: attr(data-num);
      position: absolute;
      top: -11px;
      left: 50%;
      transform: translateX(-50%);
      width: 22px;
      height: 22px;
      border-radius: 50%;
      background: var(--morado-claro);
      color: var(--morado-oscuro);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.7rem;
      border: 1px solid rgba(90, 42, 130, 0.35);
    }

    .paso.activo {
      opacity: 1;
      border-color: var(--morado-medio);
      box-shadow: 0 0 0 1px rgba(123, 63, 179, 0.35), var(--sombra-suave);
    }

    .paso span {
      display: block;
      margin-top: 0.3rem;
    }

    .contenedor-secciones {
      background: white;
      border-radius: 22px;
      padding: 1.2rem 1.1rem 1.3rem;
      box-shadow: var(--sombra-suave);
    }

    section.seccion {
      display: none;
      animation: fadeIn 0.25s ease;
    }

    section.seccion.activa {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(4px); }
      to { opacity: 1; transform: translateY(0); }
    }

    h2 {
      margin: 0 0 0.6rem;
      font-size: 1.05rem;
      color: var(--morado-oscuro);
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }

    h2 span.emoji {
      font-size: 1.2rem;
    }

    .subtitulo {
      font-size: 0.85rem;
      color: #555;
      margin-bottom: 0.8rem;
    }

    .grid-2 {
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1fr);
      gap: 1rem;
    }

    .tarjeta {
      background: var(--gris-claro);
      border-radius: 18px;
      padding: 0.8rem 0.9rem;
    }

    .tarjeta h3 {
      margin-top: 0;
      font-size: 0.95rem;
      color: var(--morado-medio);
    }

    .lectura {
      font-size: 0.9rem;
      line-height: 1.45;
    }

    .lectura p {
      margin: 0 0 0.4rem;
    }

    .badge-contexto {
      display: inline-block;
      font-size: 0.7rem;
      padding: 0.2rem 0.5rem;
      border-radius: 999px;
      background: #ffffff;
      color: var(--morado-oscuro);
      border: 1px dashed rgba(90, 42, 130, 0.4);
      margin-bottom: 0.4rem;
    }

    .arbol-familiar {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 0.4rem;
      font-size: 0.8rem;
    }

    .campo-arbol {
      background: white;
      border-radius: 999px;
      padding: 0.35rem 0.6rem;
      display: flex;
      align-items: center;
      gap: 0.35rem;
      border: 1px solid rgba(90, 42, 130, 0.15);
    }

    .campo-arbol label {
      white-space: nowrap;
    }

    .campo-arbol input {
      border: none;
      outline: none;
      background: transparent;
      flex: 1;
      font-size: 0.8rem;
    }

    .nota {
      font-size: 0.75rem;
      color: #777;
      margin-top: 0.4rem;
    }

    .vf-lista,
    .escenas {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      font-size: 0.9rem;
    }

    .item-vf {
      background: #faf6ff;
      border-radius: 14px;
      padding: 0.45rem 0.55rem;
      border: 1px solid rgba(90, 42, 130, 0.15);
    }

    .item-vf p {
      margin: 0 0 0.35rem;
    }

    .opciones-vf {
      display: inline-flex;
      gap: 0.4rem;
      font-size: 0.8rem;
    }

    .btn-pill {
      border-radius: 999px;
      padding: 0.15rem 0.5rem;
      border: 1px solid rgba(90, 42, 130, 0.4);
      background: white;
      cursor: pointer;
      font-size: 0.8rem;
      transition: var(--transition);
    }

    .btn-pill.activo {
      background: var(--morado-medio);
      color: white;
    }

    .escena {
      background: #faf6ff;
      border-radius: 16px;
      padding: 0.55rem 0.7rem;
      border: 1px solid rgba(90, 42, 130, 0.15);
    }

    .escena p {
      margin: 0 0 0.4rem;
    }

    .escena-opciones {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
      font-size: 0.85rem;
    }

    .escena-opciones button {
      text-align: left;
      background: white;
      border-radius: 12px;
      border: 1px solid rgba(90, 42, 130, 0.35);
      padding: 0.25rem 0.45rem;
      cursor: pointer;
      transition: var(--transition);
    }

    .escena-opciones button:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
    }

    .escena-opciones button.correcta {
      background: #e5f9e7;
      border-color: #3fa556;
    }

    .escena-opciones button.incorrecta {
      background: #ffe9ec;
      border-color: #d9534f;
    }

    .feedback-escena {
      font-size: 0.78rem;
      margin-top: 0.25rem;
      color: #555;
    }

    textarea {
      width: 100%;
      min-height: 110px;
      border-radius: 16px;
      border: 1px solid rgba(90, 42, 130, 0.25);
      padding: 0.6rem 0.7rem;
      font-family: inherit;
      font-size: 0.9rem;
      resize: vertical;
    }

    .nav-inferior {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 1rem;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .nav-botones {
      display: flex;
      gap: 0.5rem;
    }

    .btn {
      border-radius: 999px;
      border: none;
      padding: 0.45rem 0.9rem;
      font-size: 0.85rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      transition: var(--transition);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
      background: var(--morado-medio);
      color: white;
    }

    .btn-secundario {
      background: white;
      color: var(--morado-oscuro);
      border: 1px solid rgba(90, 42, 130, 0.35);
    }

    .btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 8px 22px rgba(0, 0, 0, 0.18);
    }

    .texto-mini {
      font-size: 0.75rem;
      color: #777;
    }

    .resumen-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1fr);
      gap: 1rem;
      margin-top: 0.5rem;
    }

    .bloque-resumen {
      background: var(--gris-claro);
      border-radius: 18px;
      padding: 0.8rem 0.9rem;
      font-size: 0.85rem;
    }

    .bloque-resumen h3 {
      margin-top: 0;
      font-size: 0.9rem;
      color: var(--morado-medio);
    }

    .tag-ok {
      display: inline-block;
      padding: 0.15rem 0.45rem;
      border-radius: 999px;
      background: #e6f9ff;
      color: #1d90b3;
      font-size: 0.72rem;
      margin-bottom: 0.3rem;
    }

    .tag-dificultad {
      display: inline-block;
      padding: 0.15rem 0.45rem;
      border-radius: 999px;
      background: #ffe7ee;
      color: #c0395f;
      font-size: 0.72rem;
      margin-bottom: 0.3rem;
    }

    .lista-simple {
      margin: 0.25rem 0 0;
      padding-left: 1rem;
    }

    .lista-simple li {
      margin-bottom: 0.2rem;
    }

    .resumen-compromiso {
      background: white;
      border-radius: 16px;
      padding: 0.6rem 0.7rem;
      border: 1px dashed rgba(90, 42, 130, 0.3);
      font-size: 0.85rem;
    }

    .nombre-alumno-resumen {
      font-weight: 600;
      color: var(--morado-oscuro);
    }

    .acciones-impresion {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
      margin-top: 0.6rem;
    }


    .logo-box img {
      max-width: 100%;
      max-height: 100%;
      display: block;
      object-fit: contain;
    }

    @media (max-width: 768px) {
      .grid-2,
      .resumen-grid {
        grid-template-columns: minmax(0, 1fr);
      }

      .pasos {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }

    @media print {
      header {
        position: static;
      }
      body {
        background: white;
      }
      .top-bar,
      .pasos,
      .nav-inferior,
      .voz-btn {
        display: none !important;
      }
      .contenedor-secciones {
        box-shadow: none;
        padding: 0.5rem 0;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="header-content">
      <div class="logos">
        <div class="logo-box">
          <img src="sep_logo.png" alt="Logotipo SEP" />
        </div>
        <div class="logo-box">
          <img src="escudo_escuela.png" alt="Escudo Escuela Primaria Gral. L√°zaro C√°rdenas" />
        </div>
      </div>
      <div class="titulo-oda">
        <h1>Las familias: espacios de pertenencia y autonom√≠a</h1>
        <p>Campo formativo: <strong>De lo humano a lo comunitario ‚Äì Fase 5</strong></p>
      </div>
      <div class="avatar-area">
        <div class="avatar-circle">
          <img src="avatar_guia.png" alt="Avatar gu√≠a" />
        </div>
        <button class="voz-btn" type="button" data-tts="Bienvenido a esta ODA sobre la familia como espacio de pertenencia y autonom√≠a. Avanza paso a paso, escucha las instrucciones y participa con sinceridad.">
          üîä Escuchar gu√≠a
        </button>
      </div>
    </div>
  </header>

  <main>
    <div class="top-bar">
      <div class="student-name">
        <label for="nombre-alumno">Nombre del alumno:</label>
        <input id="nombre-alumno" type="text" placeholder="Escribe tu nombre aqu√≠" />
      </div>
      <div class="ejes">
        <span class="chip">Inclusi√≥n</span>
        <span class="chip">Vida saludable</span>
        <span class="chip">Interculturalidad cr√≠tica</span>
        <span class="chip">Aprendizaje colaborativo</span>
      </div>
    </div>

    <div class="pasos">
      <div class="paso activo" data-num="1" data-target="inicio"><span>Inicio</span></div>
      <div class="paso" data-num="2" data-target="lectura"><span>Lectura guiada</span></div>
      <div class="paso" data-num="3" data-target="convivencia"><span>Convivencia y decisiones</span></div>
      <div class="paso" data-num="4" data-target="compromiso"><span>Mi compromiso</span></div>
      <div class="paso" data-num="5" data-target="resultados"><span>Resultados</span></div>
    </div>

    <div class="contenedor-secciones">
      <!-- INICIO -->
      <section id="inicio" class="seccion activa">
        <h2><span class="emoji">üè°</span>Inicio: Mi familia, mi lugar seguro</h2>
        <p class="subtitulo">
          En la familia aprendemos a sentirnos parte de algo importante y a tomar peque√±as decisiones que nos vuelven m√°s aut√≥nomos.
        </p>
        <div class="grid-2">
          <div class="tarjeta">
            <h3>Lectura breve ‚Äì ‚ÄúLa casa de los domingos‚Äù</h3>
            <div class="lectura">
              <span class="badge-contexto">Contexto familiar y convivencia</span>
              <p>
                Cada domingo, la familia de Maya se re√∫ne en la cocina. Mientras su abuela prepara tortillas y su mam√° corta verduras,
                su pap√° lava los platos y sus hermanos ponen la mesa. Nadie hace todo solo, todos ayudan un poco.
              </p>
              <p>
                Maya antes pensaba que ayudar era un castigo, pero con el tiempo entendi√≥ que cuando participa, la comida est√° lista m√°s r√°pido
                y todos pueden sentarse juntos a platicar. En esa mesa se cuentan chistes, se comparten preocupaciones y se toman decisiones
                importantes: qui√©n acompa√±ar√° al abuelo al m√©dico, c√≥mo cuidar√°n a la mascota o qu√© har√°n para ahorrar agua en la casa.
              </p>
              <p>
                Maya se da cuenta de algo: en su familia la escuchan cuando da una opini√≥n y respetan cuando dice que algo no le gusta. Eso la
                hace sentir que pertenece a ese grupo y que, poco a poco, puede decidir m√°s cosas por s√≠ misma.
              </p>
            </div>
          </div>
          <div class="tarjeta">
            <h3>Actividad 1 ‚Äì Mi √°rbol familiar</h3>
            <p style="font-size:0.85rem; margin-bottom:0.5rem;">
              Escribe el nombre de las personas con quienes convives la mayor parte del tiempo. Pueden ser familiares de sangre o personas que t√∫
              consideras parte de tu familia.
            </p>
            <div class="arbol-familiar">
              <div class="campo-arbol">
                <label>Persona 1:</label>
                <input type="text" placeholder="Nombre" />
              </div>
              <div class="campo-arbol">
                <label>Persona 2:</label>
                <input type="text" placeholder="Nombre" />
              </div>
              <div class="campo-arbol">
                <label>Persona 3:</label>
                <input type="text" placeholder="Nombre" />
              </div>
              <div class="campo-arbol">
                <label>Persona 4:</label>
                <input type="text" placeholder="Nombre" />
              </div>
              <div class="campo-arbol">
                <label>Persona 5:</label>
                <input type="text" placeholder="Nombre" />
              </div>
              <div class="campo-arbol">
                <label>Persona 6:</label>
                <input type="text" placeholder="Nombre" />
              </div>
            </div>
            <p class="nota">
              üëâ No es necesario que llenes todos los espacios, usa los que necesites.
            </p>
          </div>
        </div>

        <div class="nav-inferior">
          <div class="texto-mini">
            PDA: Dise√±a e interact√∫a en distintos escenarios de convivencia para fortalecer su autonom√≠a y participaci√≥n en la familia.
          </div>
          <div class="nav-botones">
            <button class="btn btn-secundario voz-btn" type="button"
              data-tts="Lee la historia de Maya y completa tu √°rbol familiar con las personas con quienes convives.">
              üîä Explicar esta parte
            </button>
            <button class="btn" type="button" data-next>
              Siguiente secci√≥n ‚ûú
            </button>
          </div>
        </div>
      </section>

      <!-- LECTURA GUIADA -->
      <section id="lectura" class="seccion">
        <h2><span class="emoji">üìñ</span>Lectura guiada: Pertenecer y decidir</h2>
        <p class="subtitulo">
          Lee con atenci√≥n el siguiente texto y reflexiona sobre c√≥mo se construye el sentido de pertenencia y la autonom√≠a dentro de la familia.
        </p>
        <div class="tarjeta">
          <h3>Lectura ‚Äì ‚ÄúLa voz de Leo‚Äù</h3>
          <div class="lectura">
            <p>
              Leo vive con su mam√°, su abuela y su hermana menor. En su casa, cada quien tiene tareas: su mam√° se encarga de trabajar y
              administrar el dinero, su abuela cocina y cuida la casa, y Leo ayuda con la limpieza y con las tareas de su hermana.
            </p>
            <p>
              Antes, Leo pensaba que los adultos tomaban todas las decisiones. Sin embargo, un d√≠a su mam√° les dijo que necesitaban ahorrar
              para reparar el techo. Los reuni√≥ en la sala y les pregunt√≥ qu√© ideas ten√≠an. Leo propuso apagar las luces que no usaran y
              vender postres los fines de semana. Su abuela sugiri√≥ reutilizar frascos y bolsas.
            </p>
            <p>
              Despu√©s de conversar, eligieron entre todos las acciones que pod√≠an hacer. Leo se sinti√≥ orgulloso porque sus ideas fueron
              escuchadas y tomadas en cuenta. Entendi√≥ que en su familia no solo lo proteg√≠an, tambi√©n le daban la oportunidad de participar
              y decidir sobre cosas importantes.
            </p>
          </div>
        </div>

        <div class="tarjeta" style="margin-top:0.8rem;">
          <h3>Actividad 2 ‚Äì Comprendo la lectura</h3>
          <div class="vf-lista">
            <div class="item-vf" data-correct="V">
              <p>1. En la familia de Leo, todos ayudan con alguna tarea en casa.</p>
              <div class="opciones-vf">
                <button class="btn-pill" type="button" data-value="V">Verdadero</button>
                <button class="btn-pill" type="button" data-value="F">Falso</button>
              </div>
            </div>
            <div class="item-vf" data-correct="F">
              <p>2. Solo la mam√° de Leo puede opinar cuando se toman decisiones en la familia.</p>
              <div class="opciones-vf">
                <button class="btn-pill" type="button" data-value="V">Verdadero</button>
                <button class="btn-pill" type="button" data-value="F">Falso</button>
              </div>
            </div>
            <div class="item-vf" data-correct="V">
              <p>3. Leo desarrolla su autonom√≠a cuando propone ideas para ahorrar en casa.</p>
              <div class="opciones-vf">
                <button class="btn-pill" type="button" data-value="V">Verdadero</button>
                <button class="btn-pill" type="button" data-value="F">Falso</button>
              </div>
            </div>
            <div class="item-vf" data-correct="F">
              <p>4. Sentirse escuchado no tiene relaci√≥n con el sentido de pertenencia en la familia.</p>
              <div class="opciones-vf">
                <button class="btn-pill" type="button" data-value="V">Verdadero</button>
                <button class="btn-pill" type="button" data-value="F">Falso</button>
              </div>
            </div>
          </div>
        </div>

        <div class="nav-inferior">
          <button class="btn btn-secundario" type="button" data-prev>
            ‚óÄ Volver
          </button>
          <div class="nav-botones">
            <button class="btn btn-secundario voz-btn" type="button"
              data-tts="Lee con calma la historia de Leo y responde verdadero o falso seg√∫n lo que entendiste.">
              üîä Explicar esta parte
            </button>
            <button class="btn" type="button" data-next>
              Siguiente secci√≥n ‚ûú
            </button>
          </div>
        </div>
      </section>

      <!-- CONVIVENCIA Y DECISIONES -->
      <section id="convivencia" class="seccion">
        <h2><span class="emoji">ü§ù</span>Convivencia y decisiones en mi familia</h2>
        <p class="subtitulo">
          Piensa en distintas situaciones de convivencia familiar y elige la opci√≥n que favorezca el respeto, el di√°logo y la participaci√≥n.
        </p>
        <div class="grid-2">
          <div class="tarjeta">
            <h3>Actividad 3 ‚Äì Escenarios de convivencia</h3>
            <div class="escenas">
              <div class="escena" data-correct="1">
                <p><strong>Escena 1:</strong> Tu hermano quiere usar el mismo videojuego que t√∫ est√°s usando.</p>
                <div class="escena-opciones">
                  <button type="button" data-opt="0">
                    A) Le gritas que espere y sigues jugando sin hacerle caso.
                  </button>
                  <button type="button" data-opt="1">
                    B) Pausas el juego, acuerdan un tiempo para cada uno y buscan otra actividad mientras tanto.
                  </button>
                  <button type="button" data-opt="2">
                    C) Escondes el videojuego para que no lo encuentre.
                  </button>
                </div>
                <div class="feedback-escena"></div>
              </div>

              <div class="escena" data-correct="2">
                <p><strong>Escena 2:</strong> En casa necesitan decidir qui√©n sacar√° la basura cada d√≠a.</p>
                <div class="escena-opciones">
                  <button type="button" data-opt="0">
                    A) Dices que no te toca nunca porque eres el m√°s peque√±o.
                  </button>
                  <button type="button" data-opt="1">
                    B) Propones que lo haga siempre la misma persona.
                  </button>
                  <button type="button" data-opt="2">
                    C) Sugieres hacer un peque√±o calendario para que todos participen por turnos.
                  </button>
                </div>
                <div class="feedback-escena"></div>
              </div>
            </div>
          </div>
          <div class="tarjeta">
            <h3>Actividad 4 ‚Äì ¬øC√≥mo es mi convivencia?</h3>
            <p style="font-size:0.85rem;">
              Responde con sinceridad. No se calificar√°, sirve para reflexionar.
            </p>
            <div style="font-size:0.85rem; line-height:1.4;">
              <p>‚úîÔ∏è ¬øEn qu√© momentos te sientes m√°s parte de tu familia?</p>
              <textarea id="reflexion-pertenencia" placeholder="Por ejemplo: cuando comemos juntos, cuando vemos una pel√≠cula, cuando me preguntan c√≥mo estoy..."></textarea>
              <p>‚úîÔ∏è Menciona una decisi√≥n reciente en la que hayas participado en tu hogar.</p>
              <textarea id="reflexion-decision" placeholder="Por ejemplo: elegir el men√∫, decidir a qu√© lugar ir, c√≥mo organizar la limpieza, etc."></textarea>
            </div>
          </div>
        </div>

        <div class="nav-inferior">
          <button class="btn btn-secundario" type="button" data-prev>
            ‚óÄ Volver
          </button>
          <div class="nav-botones">
            <button class="btn btn-secundario voz-btn" type="button"
              data-tts="Imagina que vives estas escenas con tu familia. Elige la opci√≥n que ayude a convivir mejor y escribe tus propias experiencias.">
              üîä Explicar esta parte
            </button>
            <button class="btn" type="button" data-next>
              Siguiente secci√≥n ‚ûú
            </button>
          </div>
        </div>
      </section>

      <!-- COMPROMISO -->
      <section id="compromiso" class="seccion">
        <h2><span class="emoji">üìù</span>Mi compromiso con mi familia</h2>
        <p class="subtitulo">
          Dise√±a una peque√±a acci√≥n que puedas realizar en tu casa para mejorar la convivencia, fortalecer tu autonom√≠a y cuidar a las personas con las que vives.
        </p>
        <div class="tarjeta">
          <h3>Actividad 5 ‚Äì Escribo mi compromiso</h3>
          <p style="font-size:0.85rem;">
            Completa el siguiente texto con tus propias palabras.
          </p>
          <textarea id="compromiso-texto" placeholder="Ejemplo: Me comprometo a... poner la mesa tres veces por semana, escuchar a mi familia cuando est√°n preocupados, proponer soluciones cuando haya un problema, etc."></textarea>
          <p class="nota">
            üëâ Al terminar, podr√°s imprimir tu compromiso junto con tus resultados.
          </p>
        </div>

        <div class="nav-inferior">
          <button class="btn btn-secundario" type="button" data-prev>
            ‚óÄ Volver
          </button>
          <div class="nav-botones">
            <button class="btn btn-secundario voz-btn" type="button"
              data-tts="Piensa en algo concreto que puedas hacer en casa. No tiene que ser perfecto, solo debe ser realista y realizado con cari√±o.">
              üîä Explicar esta parte
            </button>
            <button class="btn" type="button" data-next>
              Ver resultados ‚ûú
            </button>
          </div>
        </div>
      </section>

      <!-- RESULTADOS -->
      <section id="resultados" class="seccion">
        <h2><span class="emoji">üìä</span>Resultados y reflexi√≥n final</h2>
        <p class="subtitulo">
          Aqu√≠ puedes ver un resumen de tu participaci√≥n. Lo morado indica lo que ya lograste y lo rosa las √°reas para seguir mejorando.
        </p>

        <div class="resumen-grid">
          <div class="bloque-resumen">
            <h3>Resumen de actividades</h3>
            <div id="resumen-calificacion" style="margin-bottom:0.4rem; font-size:0.9rem;">
              <!-- Se llena con JavaScript -->
            </div>
            <div id="resumen-logros">
              <!-- Se llena con JavaScript -->
            </div>
            <div id="resumen-dificultades" style="margin-top:0.4rem;">
              <!-- Se llena con JavaScript -->
            </div>
          </div>

          <div class="bloque-resumen">
            <h3>Mi compromiso familiar</h3>
            <div class="resumen-compromiso">
              <p>
                Alumno(a): <span class="nombre-alumno-resumen" id="resumen-nombre">__________________</span>
              </p>
              <p style="margin-top:0.3rem;">
                Mi compromiso para mejorar la convivencia y fortalecer mi autonom√≠a en mi familia es:
              </p>
              <p id="resumen-compromiso-texto" style="margin-top:0.3rem;">
                ____________________________________________________________________________________
              </p>
            </div>
            <div class="acciones-impresion">
              <button class="btn" type="button" onclick="printSection('resultados')">
                üñ®Ô∏è Imprimir resultados
              </button>
              <button class="btn btn-secundario" type="button" onclick="printSection('inicio','lectura','convivencia','compromiso')">
                üñ®Ô∏è Imprimir actividades
              </button>
            </div>
          </div>
        </div>

        <p class="texto-mini" style="margin-top:0.7rem;">
          Esta ODA est√° alineada con el campo formativo <strong>De lo humano a lo comunitario</strong> y el contenido
          ‚ÄúLas familias como espacio para el desarrollo del sentido de pertenencia y autonom√≠a, para una sana convivencia‚Äù.
        </p>
      </section>
    </div>
  </main>

  <script>
    // Navegaci√≥n por secciones
    const pasos = document.querySelectorAll('.paso');
    const secciones = document.querySelectorAll('section.seccion');

    function mostrarSeccion(id) {
      secciones.forEach(sec => {
        sec.classList.toggle('activa', sec.id === id);
      });
      pasos.forEach(p => {
        p.classList.toggle('activo', p.getAttribute('data-target') === id);
      });
      if (id === 'resultados') {
        actualizarResultados();
      }
    }

    pasos.forEach(paso => {
      paso.addEventListener('click', () => {
        const target = paso.getAttribute('data-target');
        mostrarSeccion(target);
      });
    });

    document.querySelectorAll('[data-next]').forEach(btn => {
      btn.addEventListener('click', () => {
        const actual = document.querySelector('section.seccion.activa');
        const idx = Array.from(secciones).indexOf(actual);
        if (idx < secciones.length - 1) {
          mostrarSeccion(secciones[idx + 1].id);
        }
      });
    });

    document.querySelectorAll('[data-prev]').forEach(btn => {
      btn.addEventListener('click', () => {
        const actual = document.querySelector('section.seccion.activa');
        const idx = Array.from(secciones).indexOf(actual);
        if (idx > 0) {
          mostrarSeccion(secciones[idx - 1].id);
        }
      });
    });

    // Verdadero / Falso
    const itemsVF = document.querySelectorAll('.item-vf');
    itemsVF.forEach(item => {
      const botones = item.querySelectorAll('.btn-pill');
      botones.forEach(btn => {
        btn.addEventListener('click', () => {
          botones.forEach(b => b.classList.remove('activo'));
          btn.classList.add('activo');
          item.dataset.selected = btn.dataset.value;
        });
      });
    });

    // Escenas de convivencia
    const escenas = document.querySelectorAll('.escena');
    escenas.forEach(escena => {
      const correcta = escena.getAttribute('data-correct');
      const feedback = escena.querySelector('.feedback-escena');
      const botones = escena.querySelectorAll('.escena-opciones button');

      botones.forEach(btn => {
        btn.addEventListener('click', () => {
          const opt = btn.getAttribute('data-opt');
          botones.forEach(b => {
            b.classList.remove('correcta', 'incorrecta');
          });
          if (opt === correcta) {
            btn.classList.add('correcta');
            feedback.textContent = '‚úÖ Esta opci√≥n favorece el respeto, el di√°logo y la participaci√≥n en la familia.';
          } else {
            btn.classList.add('incorrecta');
            feedback.textContent = '‚ö†Ô∏è Esta opci√≥n puede generar conflictos. Piensa c√≥mo podr√≠as resolverlo con m√°s di√°logo y colaboraci√≥n.';
          }
          escena.dataset.selected = opt;
        });
      });
    });

    // Resultados
    function actualizarResultados() {
      let aciertosVF = 0;
      let totalVF = itemsVF.length;
      itemsVF.forEach(item => {
        const correcta = item.getAttribute('data-correct');
        const seleccionada = item.dataset.selected || null;
        if (seleccionada === correcta) aciertosVF++;
      });

      let aciertosEscenas = 0;
      let totalEscenas = escenas.length;
      escenas.forEach(escena => {
        const correcta = escena.getAttribute('data-correct');
        const seleccionada = escena.dataset.selected || null;
        if (seleccionada === correcta) aciertosEscenas++;
      });

      const totalReactivos = totalVF + totalEscenas;
      const totalAciertos = aciertosVF + aciertosEscenas;
      const porcentaje = totalReactivos > 0 ? Math.round((totalAciertos / totalReactivos) * 100) : 0;

      const resumenCalif = document.getElementById('resumen-calificacion');
      resumenCalif.innerHTML = `
        <strong>Aciertos:</strong> ${totalAciertos} de ${totalReactivos} reactivos (${porcentaje}%).
      `;

      const resumenLogros = document.getElementById('resumen-logros');
      const resumenDificultades = document.getElementById('resumen-dificultades');

      let logros = [];
      let dificultades = [];

      if (aciertosVF >= totalVF / 2) {
        logros.push('Comprende la importancia de la participaci√≥n y la escucha en la familia.');
      } else {
        dificultades.push('Reforzar la comprensi√≥n lectora sobre participaci√≥n y pertenencia en la familia.');
      }

      if (aciertosEscenas >= totalEscenas / 2) {
        logros.push('Elige opciones de convivencia basadas en el respeto, el di√°logo y la colaboraci√≥n.');
      } else {
        dificultades.push('Analizar con m√°s detalle las consecuencias de las decisiones que se toman en casa.');
      }

      resumenLogros.innerHTML = logros.length
        ? `<span class="tag-ok">Fortalezas</span><ul class="lista-simple">${logros.map(l => `<li>${l}</li>`).join('')}</ul>`
        : '';

      resumenDificultades.innerHTML = dificultades.length
        ? `<span class="tag-dificultad">Aspectos a mejorar</span><ul class="lista-simple">${dificultades.map(d => `<li>${d}</li>`).join('')}</ul>`
        : '';

      const nombre = document.getElementById('nombre-alumno').value.trim() || '__________________';
      document.getElementById('resumen-nombre').textContent = nombre;

      const compromiso = document.getElementById('compromiso-texto').value.trim();
      document.getElementById('resumen-compromiso-texto').textContent = compromiso || '_______________________________';
    }

    // Impresi√≥n de secciones espec√≠ficas
    function printSection() {
      const ids = Array.from(arguments);
      const allSections = document.querySelectorAll('section.seccion');
      const visiblesPrevias = [];

      allSections.forEach(sec => {
        visiblesPrevias.push({ id: sec.id, display: sec.style.display || '' });
        if (!ids.includes(sec.id)) {
          sec.style.display = 'none';
        } else {
          sec.style.display = 'block';
        }
      });

      window.print();

      // Restaurar estado
      visiblesPrevias.forEach(info => {
        const sec = document.getElementById(info.id);
        sec.style.display = info.display;
      });

      // Asegurar que la secci√≥n activa siga siendo visible en pantalla
      const activa = ids[0] || 'inicio';
      mostrarSeccion(activa);
    }

    window.printSection = printSection;

    // Voz (Text-to-Speech)
    function speak(text) {
      if (!('speechSynthesis' in window)) {
        alert('Tu navegador no soporta la lectura en voz alta.');
        return;
      }
      window.speechSynthesis.cancel();
      const utterance = new SpeechSynthesisUtterance(text);
      utterance.lang = 'es-MX';
      utterance.rate = 1;
      utterance.pitch = 1;
      window.speechSynthesis.speak(utterance);
    }

    document.querySelectorAll('.voz-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const text = btn.getAttribute('data-tts');
        if (text) speak(text);
      });
    });
  </script>
</body>
</html>
