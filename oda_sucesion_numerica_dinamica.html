<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>ODA ‚Äì La sucesi√≥n num√©rica (Pensamiento Matem√°tico ‚Äì Din√°mica)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root{
      --primary:#1d4ed8;
      --primary-soft:#dbeafe;
      --accent:#0ea5e9;
      --text:#0f172a;
      --muted:#6b7280;
      --border:#e5e7eb;
      --card:#ffffff;
      --shadow:0 16px 35px rgba(15,23,42,.18);
      --error:#b91c1c;
      --success:#15803d;
    }
    *{box-sizing:border-box;}
    body{
      margin:0;
      font-family:system-ui,-apple-system,"Segoe UI",sans-serif;
      background:linear-gradient(180deg,#e0f2fe 0,#eff6ff 40%,#f9fafb 100%);
      color:var(--text);
      min-height:100vh;
      display:flex;
      justify-content:center;
      padding:14px 10px;
      position:relative;
    }
    body::before{
      content:"";
      position:fixed;
      inset:12% 16%;
      background:url("escudo_escuela.png") center/contain no-repeat;
      opacity:.03;
      pointer-events:none;
      z-index:0;
    }
    .school-logo-fixed{
      position:fixed;
      right:16px;
      bottom:10px;
      height:86px;
      opacity:0.95;
      z-index:5;
      pointer-events:none;
    }
    .wrapper{
      position:relative;
      z-index:1;
      width:100%;
      max-width:1180px;
      background:radial-gradient(circle at top left,#dbeafe 0,#ffffff 45%,#eff6ff 100%);
      border-radius:26px;
      box-shadow:var(--shadow);
      padding:14px 16px 16px;
      display:flex;
      flex-direction:column;
      gap:12px;
      border:1px solid #bfdbfe;
    }
    header{
      display:grid;
      grid-template-columns:auto minmax(0,2.3fr) auto;
      gap:10px;
      align-items:center;
      padding-bottom:8px;
      border-bottom:1px solid #dbeafe;
    }
    @media(max-width:900px){
      header{
        grid-template-columns:1fr;
        text-align:center;
      }
      .author-block{text-align:center;}
    }
    .logo-left img{
      max-height:60px;
      width:auto;
      display:block;
    }
    @media(max-width:900px){
      .logo-left{display:flex;justify-content:center;}
    }
    .title-block h1{
      margin:0;
      font-size:1.22rem;
      display:flex;
      align-items:center;
      gap:8px;
      flex-wrap:wrap;
    }
    .title-block h1 .icon{
      font-size:1.45rem;
    }
    .title-meta{
      margin-top:3px;
      font-size:.84rem;
      color:var(--muted);
    }
    .phase-label{
      display:inline-flex;
      align-items:center;
      gap:4px;
      padding:2px 8px;
      border-radius:999px;
      background:var(--primary-soft);
      color:var(--primary);
      margin-top:3px;
    }
    .chips{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      margin-top:4px;
      font-size:.78rem;
    }
    .chip{
      display:inline-flex;
      align-items:center;
      gap:5px;
      padding:2px 8px;
      border-radius:999px;
      background:#eff6ff;
      border:1px solid #dbeafe;
    }
    .chip .dot{
      width:7px;
      height:7px;
      border-radius:999px;
      background:#22c55e;
    }
    .author-block{
      font-size:.82rem;
      color:var(--muted);
      text-align:right;
    }

    main{
      display:grid;
      grid-template-columns:minmax(0,1.65fr) minmax(0,1fr);
      gap:10px;
      margin-top:2px;
    }
    @media(max-width:900px){
      main{
        grid-template-columns:1fr;
      }
    }

    .left-column,.right-column{
      display:flex;
      flex-direction:column;
      gap:8px;
    }

    .card{
      background:var(--card);
      border-radius:18px;
      border:1px solid #e5e7eb;
      box-shadow:0 8px 20px rgba(15,23,42,.06);
      overflow:hidden;
    }
    .card-header{
      padding:8px 12px 6px;
      border-bottom:1px solid #e5e7eb;
      background:linear-gradient(90deg,#dbeafe,#eff6ff);
    }
    .card-title{
      display:flex;
      align-items:center;
      gap:6px;
      font-size:.9rem;
      font-weight:600;
      color:#0f172a;
    }
    .card-title .icon{font-size:1.05rem;}
    .card-body{
      padding:8px 12px 10px;
      font-size:.84rem;
    }

    .objective-list{
      padding-left:18px;
      margin:6px 0;
    }
    .objective-list li{margin-bottom:3px;}

    .timeline{
      margin-top:6px;
      border-radius:12px;
      border:1px dashed #bfdbfe;
      background:#eff6ff;
      padding:6px 8px;
      font-size:.8rem;
    }
    .timeline-item{
      display:flex;
      gap:6px;
      margin-bottom:3px;
    }
    .timeline-label{
      font-weight:600;
      color:var(--primary);
      min-width:97px;
    }

    .module-nav{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      margin-bottom:8px;
    }
    .module-button{
      flex:1 1 120px;
      border-radius:999px;
      border:1px solid #bfdbfe;
      background:#eff6ff;
      padding:5px 8px;
      font-size:.78rem;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:5px;
      cursor:pointer;
      transition:.15s;
    }
    .module-button span.icon{font-size:.95rem;}
    .module-button.active{
      background:var(--primary);
      color:#fff;
      border-color:var(--primary);
      box-shadow:0 0 0 1px rgba(37,99,235,.6);
    }

    .module-panel{display:none;}
    .module-panel.active{display:block;}

    .status{
      margin-top:6px;
      border-radius:10px;
      padding:6px 8px;
      display:flex;
      gap:6px;
      font-size:.8rem;
      align-items:flex-start;
    }
    .status span{font-size:1rem;}
    .status-info{
      background:#eff6ff;
      border:1px solid #bfdbfe;
      color:#1e3a8a;
    }
    .status-success{
      background:#dcfce7;
      border:1px solid #22c55e;
      color:#166534;
    }
    .status-error{
      background:#fee2e2;
      border:1px solid #f97373;
      color:#991b1b;
    }

    .btn-row{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      margin-top:6px;
    }
    .btn{
      border-radius:999px;
      border:none;
      padding:5px 10px;
      font-size:.8rem;
      display:inline-flex;
      align-items:center;
      gap:5px;
      cursor:pointer;
      white-space:nowrap;
    }
    .btn-primary{
      background:var(--primary);
      color:#fff;
    }
    .btn-secondary{
      background:#e5e7eb;
      color:#111827;
    }
    .btn-outline{
      background:#fff;
      border:1px solid #cbd5f5;
      color:#1e3a8a;
    }

    .sequence-table{
      width:100%;
      border-collapse:collapse;
      margin-top:4px;
      font-size:.8rem;
    }
    .sequence-table th,
    .sequence-table td{
      border:1px solid #e5e7eb;
      padding:4px 6px;
      text-align:center;
    }
    .sequence-table th{
      background:#eff6ff;
      font-weight:600;
    }
    .sequence-label{
      text-align:left;
      font-weight:600;
    }
    .sequence-table input[type="number"]{
      width:80px;
      max-width:90%;
      padding:3px 4px;
      border-radius:999px;
      border:1px solid #cbd5f5;
      font-size:.78rem;
      text-align:center;
    }

    .options-list{
      list-style:none;
      padding-left:0;
      margin:6px 0;
    }
    .options-list li{
      margin-bottom:3px;
    }
    .options-list label{
      display:flex;
      align-items:flex-start;
      gap:4px;
      cursor:pointer;
      font-size:.8rem;
    }

    .student-card .student-row{
      display:flex;
      flex-direction:column;
      gap:3px;
      margin-bottom:6px;
    }
    .student-card input[type="text"]{
      padding:5px 7px;
      border-radius:999px;
      border:1px solid #cbd5f5;
      font-size:.82rem;
      width:100%;
    }

    .avatar-card{
      display:flex;
      gap:10px;
      align-items:flex-start;
    }
   
.avatar-circle{
  width:120px;
  height:auto;
  background:#eff6ff;
  border:1px solid #bfdbfe;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius:18px;
  overflow:visible; /* permite que la imagen salga si es m√°s alta */
  flex-shrink:0;
}
.avatar-circle img{
  width:100%;
  height:auto;
  object-fit:contain;
}
    .avatar-text{
      font-size:.8rem;
      color:#374151;
    }
    .avatar-steps{
      margin:4px 0;
      padding-left:18px;
    }
    .avatar-steps li{margin-bottom:3px;}
    .badge-step{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      width:16px;
      height:16px;
      border-radius:999px;
      background:#1d4ed8;
      color:#fff;
      font-size:.7rem;
      margin-right:4px;
    }

    footer{
      margin-top:4px;
      padding-top:7px;
      border-top:1px solid #dbeafe;
      font-size:.78rem;
      color:#6b7280;
      display:flex;
      justify-content:space-between;
      flex-wrap:wrap;
      gap:6px;
    }
    footer .project{
      font-style:italic;
      color:#4b5563;
    }
  </style>
</head>
<body>
  <img src="escudo_escuela.png" alt="Escudo escuela" class="school-logo-fixed">

  <div class="wrapper">
    <header>
      <div class="logo-left">
        <img src="sep_logo.png" alt="Secretar√≠a de Educaci√≥n P√∫blica">
      </div>
      <div class="title-block">
        <h1>
          <span class="icon">üî¢</span>
          <span>La sucesi√≥n num√©rica: contar hacia adelante y hacia atr√°s ‚Äì Pensamiento Matem√°tico (Din√°mica)</span>
        </h1>
        <div class="title-meta">
          Contenido: <strong>Estudio de los n√∫meros.</strong><br>
          PDA 5.¬∫: <strong>Expresa oralmente la sucesi√≥n num√©rica hasta seis cifras, en espa√±ol y hasta donde sea posible, en su lengua materna, de manera ascendente y descendente a partir de un n√∫mero natural dado.</strong><br>
          <span class="phase-label">Pensamiento Matem√°tico ¬∑ Fase 5 ¬∑ 5.¬∫ grado</span>
        </div>
        <div class="chips">
          <span class="chip"><span class="dot"></span>Campo formativo: Saberes y Pensamiento Matem√°tico</span>
          <span class="chip">Proyecto: <strong>N√∫meros que cuentan historias</strong></span>
        </div>
      </div>
      <div class="author-block">
        <strong>Autor: Mtro. Mart√≠n Reta</strong><br>
        Escuela Primaria ‚ÄúGral. L√°zaro C√°rdenas‚Äù<br>
        Ejido Santa Mar√≠a, Pesquer√≠a, N.L.
      </div>
    </header>

    <main>
      <!-- COLUMNA IZQUIERDA -->
      <section class="left-column">
        <!-- Prop√≥sito -->
        <div class="card">
          <div class="card-header">
            <div class="card-title">
              <span class="icon">üéØ</span>
              <span>Prop√≥sito de la ODA</span>
            </div>
          </div>
          <div class="card-body">
            Al finalizar esta ODA, las y los estudiantes ser√°n capaces de <strong>continuar la sucesi√≥n num√©rica hasta seis cifras</strong>, contando
            <strong>hacia adelante</strong> y <strong>hacia atr√°s</strong> a partir de un n√∫mero dado, explicando con sus propias palabras c√≥mo
            van avanzando o retrocediendo uno a uno.
            <ul class="objective-list">
              <li>Reconocer que una <strong>sucesi√≥n num√©rica</strong> es una lista ordenada de n√∫meros que sigue una regla.</li>
              <li>Contar de <strong>uno en uno hacia adelante</strong> a partir de n√∫meros de hasta seis cifras.</li>
              <li>Contar de <strong>uno en uno hacia atr√°s</strong> sin perder la idea de ‚Äúun n√∫mero menos‚Äù.</li>
              <li>Relacionar la sucesi√≥n con situaciones de la vida diaria (turnos, folios, marcadores, kil√≥metros, etc.).</li>
            </ul>
            <div class="timeline">
              <div class="timeline-item">
                <div class="timeline-label">1. Exploro</div>
                <div>Observo sucesiones num√©ricas y descubro la regla que siguen.</div>
              </div>
              <div class="timeline-item">
                <div class="timeline-label">2. Practico</div>
                <div>Completo n√∫meros que siguen hacia adelante.</div>
              </div>
              <div class="timeline-item">
                <div class="timeline-label">3. Retrocedo</div>
                <div>Completo n√∫meros que van hacia atr√°s.</div>
              </div>
              <div class="timeline-item">
                <div class="timeline-label">4. Me eval√∫o</div>
                <div>Respondo un mini cuestionario para revisar qu√© tanto he comprendido.</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Navegaci√≥n de m√≥dulos -->
        <div class="card">
          <div class="card-header">
            <div class="card-title">
              <span class="icon">üß©</span>
              <span>M√≥dulos de trabajo</span>
            </div>
          </div>
          <div class="card-body">
            <div class="module-nav">
              <button class="module-button active" data-module="explora">
                <span class="icon">üëÄ</span> Explora las sucesiones
              </button>
              <button class="module-button" data-module="asc">
                <span class="icon">‚¨ÜÔ∏è</span> Cuenta hacia adelante
              </button>
              <button class="module-button" data-module="desc">
                <span class="icon">‚¨áÔ∏è</span> Cuenta hacia atr√°s
              </button>
              <button class="module-button" data-module="evalua">
                <span class="icon">üìù</span> Eval√∫ate
              </button>
            </div>

            <!-- Panel 1: Explora -->
            <div id="panel-explora" class="module-panel active">
              <p>
                Observa las siguientes sucesiones y elige la opci√≥n que mejor explica la <strong>regla</strong> que siguen
                los n√∫meros.
              </p>
              <ol class="options-list">
                <li>
                  <div><strong>1)</strong> 7, 8, 9, 10, 11, 12, ...</div>
                  <ul class="options-list">
                    <li><label><input type="radio" name="ex1" value="a"> Suma 2 en cada paso.</label></li>
                    <li><label><input type="radio" name="ex1" value="b"> Resta 1 en cada paso.</label></li>
                    <li><label><input type="radio" name="ex1" value="c"> Suma 1 en cada paso.</label></li>
                  </ul>
                </li>
                <li>
                  <div><strong>2)</strong> 305, 304, 303, 302, 301, ...</div>
                  <ul class="options-list">
                    <li><label><input type="radio" name="ex2" value="a"> Cuenta hacia adelante de 1 en 1.</label></li>
                    <li><label><input type="radio" name="ex2" value="b"> Cuenta hacia atr√°s de 1 en 1.</label></li>
                    <li><label><input type="radio" name="ex2" value="c"> Cuenta hacia atr√°s de 10 en 10.</label></li>
                  </ul>
                </li>
                <li>
                  <div><strong>3)</strong> 9 998, 9 999, 10 000, 10 001, ...</div>
                  <ul class="options-list">
                    <li><label><input type="radio" name="ex3" value="a"> Cuando llego a 9 999, la sucesi√≥n se detiene.</label></li>
                    <li><label><input type="radio" name="ex3" value="b"> Despu√©s de 9 999 sigue 10 000 y contin√∫o sumando 1.</label></li>
                    <li><label><input type="radio" name="ex3" value="c"> Despu√©s de 9 999 vuelve a empezar en 0.</label></li>
                  </ul>
                </li>
              </ol>
              <div class="btn-row">
                <button class="btn btn-primary" id="btnCheckExplora">üìù Revisar respuestas</button>
                <button class="btn btn-secondary" id="btnResetExplora">‚Ü©Ô∏è Empezar de nuevo</button>
              </div>
              <div id="statusExplora" class="status status-info">
                <span>‚ÑπÔ∏è</span>
                <div>Elige una respuesta en cada pregunta y haz clic en <strong>‚ÄúRevisar respuestas‚Äù</strong>.</div>
              </div>
            </div>

            <!-- Panel 2: Cuenta hacia adelante -->
            <div id="panel-asc" class="module-panel">
              <p>
                Completa las sucesiones contando <strong>hacia adelante de 1 en 1</strong>. Se generan <strong>n√∫meros diferentes
                cada vez</strong>.
              </p>
              <table class="sequence-table" id="tableAsc">
                <thead>
                  <tr>
                    <th class="sequence-label">Serie</th>
                    <th colspan="5">Sucesi√≥n (de izquierda a derecha)</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- Se llena por JavaScript -->
                </tbody>
              </table>
              <div class="btn-row">
                <button class="btn btn-secondary" id="btnGenAsc">üîÑ Nuevas sucesiones</button>
                <button class="btn btn-primary" id="btnCheckAsc">‚úÖ Revisar</button>
                <button class="btn btn-secondary" id="btnResetAsc">‚Ü©Ô∏è Limpiar</button>
              </div>
              <div id="statusAsc" class="status status-info">
                <span>‚ÑπÔ∏è</span>
                <div>Escribe los n√∫meros que siguen hacia adelante y luego haz clic en <strong>‚ÄúRevisar‚Äù</strong>.</div>
              </div>
            </div>

            <!-- Panel 3: Cuenta hacia atr√°s -->
            <div id="panel-desc" class="module-panel">
              <p>
                Completa las sucesiones contando <strong>hacia atr√°s de 1 en 1</strong>. Tambi√©n aqu√≠ los n√∫meros
                cambian en cada intento.
              </p>
              <table class="sequence-table" id="tableDesc">
                <thead>
                  <tr>
                    <th class="sequence-label">Serie</th>
                    <th colspan="5">Sucesi√≥n (de izquierda a derecha)</th>
                  </tr>
                </thead>
                <tbody>
                  <!-- Se llena por JavaScript -->
                </tbody>
              </table>
              <div class="btn-row">
                <button class="btn btn-secondary" id="btnGenDesc">üîÑ Nuevas sucesiones</button>
                <button class="btn btn-primary" id="btnCheckDesc">‚úÖ Revisar</button>
                <button class="btn btn-secondary" id="btnResetDesc">‚Ü©Ô∏è Limpiar</button>
              </div>
              <div id="statusDesc" class="status status-info">
                <span>‚ÑπÔ∏è</span>
                <div>Escribe los n√∫meros que van hacia atr√°s y luego haz clic en <strong>‚ÄúRevisar‚Äù</strong>.</div>
              </div>
            </div>

            <!-- Panel 4: Eval√∫ate -->
            <div id="panel-evalua" class="module-panel">
              <p>Responde las preguntas y revisa qu√© tanto dominas la sucesi√≥n num√©rica.</p>
              <ol class="options-list">
                <li>
                  <div><strong>1)</strong> ¬øCu√°l de las siguientes listas <strong>est√° completa</strong> contando hacia adelante de 1 en 1?</div>
                  <ul class="options-list">
                    <li><label><input type="radio" name="ev1" value="a"> 3, 4, 6, 7, 8</label></li>
                    <li><label><input type="radio" name="ev1" value="b"> 3, 4, 5, 6, 7</label></li>
                    <li><label><input type="radio" name="ev1" value="c"> 3, 5, 7, 9, 11</label></li>
                  </ul>
                </li>
                <li>
                  <div><strong>2)</strong> ¬øQu√© n√∫mero falta en la sucesi√≥n? 12, 11, 10, ___, 8</div>
                  <ul class="options-list">
                    <li><label><input type="radio" name="ev2" value="a"> 7</label></li>
                    <li><label><input type="radio" name="ev2" value="b"> 9</label></li>
                    <li><label><input type="radio" name="ev2" value="c"> 13</label></li>
                  </ul>
                </li>
                <li>
                  <div><strong>3)</strong> En la sucesi√≥n que inicia en 250 y cuenta hacia adelante de 1 en 1, ¬øqu√© n√∫mero va inmediatamente despu√©s de 253?</div>
                  <ul class="options-list">
                    <li><label><input type="radio" name="ev3" value="a"> 252</label></li>
                    <li><label><input type="radio" name="ev3" value="b"> 254</label></li>
                    <li><label><input type="radio" name="ev3" value="c"> 255</label></li>
                  </ul>
                </li>
                <li>
                  <div><strong>4)</strong> Si cuentas hacia atr√°s desde 10, ¬øqu√© n√∫mero dir√°s despu√©s de 7?</div>
                  <ul class="options-list">
                    <li><label><input type="radio" name="ev4" value="a"> 6</label></li>
                    <li><label><input type="radio" name="ev4" value="b"> 8</label></li>
                    <li><label><input type="radio" name="ev4" value="c"> 5</label></li>
                  </ul>
                </li>
              </ol>
              <div class="btn-row">
                <button class="btn btn-primary" id="btnCheckEvalua">üìù Revisar respuestas</button>
                <button class="btn btn-secondary" id="btnResetEvalua">‚Ü©Ô∏è Empezar de nuevo</button>
              </div>
              <div id="statusEvalua" class="status status-info">
                <span>‚ÑπÔ∏è</span>
                <div>Responde todas las preguntas y haz clic en <strong>‚ÄúRevisar respuestas‚Äù</strong> para ver tu resultado.</div>
              </div>
            </div>

          </div>
        </div>
      </section>

      <!-- COLUMNA DERECHA -->
      <section class="right-column">
        <!-- Datos del alumno -->
        <div class="card student-card">
          <div class="card-header">
            <div class="card-title">
              <span class="icon">üßë‚Äçüéì</span>
              <span>Datos del alumno y controles</span>
            </div>
          </div>
          <div class="card-body">
            <div class="student-row">
              <label for="studentName">Nombre del alumno(a):</label>
              <input type="text" id="studentName" placeholder="Escribe tu nombre aqu√≠">
            </div>
            <div class="btn-row">
              <button class="btn btn-outline" id="btnPrintResults">üñ®Ô∏è Imprimir resultados</button>
              <button class="btn btn-outline" id="btnPrintActivity">üìÑ Actividad para imprimir</button>
            </div>
          </div>
        </div>

        <!-- Avatar gu√≠a -->
        <div class="card">
          <div class="card-header">
            <div class="card-title">
              <span class="icon">üßë‚Äçüè´</span>
              <span>Avatar gu√≠a ‚Äì Instrucciones</span>
            </div>
          </div>
          <div class="card-body avatar-card">
            <div class="avatar-circle" aria-hidden="true">
              <img src="avatar_guia.png" alt="Avatar del Mtro. Mart√≠n Reta">
            </div>
            <div class="avatar-text">
              <strong>Hola, soy el maestro Mart√≠n Reta.</strong> Te acompa√±ar√© a practicar c√≥mo contar hacia adelante y hacia atr√°s.
              <ol class="avatar-steps">
                <li><span class="badge-step">1</span> En <strong>‚ÄúExplora las sucesiones‚Äù</strong> descubre la regla que siguen los n√∫meros.</li>
                <li><span class="badge-step">2</span> En <strong>‚ÄúCuenta hacia adelante‚Äù</strong> completa los n√∫meros que siguen.</li>
                <li><span class="badge-step">3</span> En <strong>‚ÄúCuenta hacia atr√°s‚Äù</strong> escribe los n√∫meros que van antes.</li>
                <li><span class="badge-step">4</span> En <strong>‚ÄúEval√∫ate‚Äù</strong> responde las preguntas para revisar tu aprendizaje.</li>
              </ol>
              <button class="btn btn-primary" id="btnPlayVoice">üîä Escucha las instrucciones</button>
            </div>
          </div>
        </div>

        <!-- Sugerencias para el docente -->
        <div class="card">
          <div class="card-header">
            <div class="card-title">
              <span class="icon">üìå</span>
              <span>Sugerencias de uso en el aula</span>
            </div>
          </div>
          <div class="card-body">
            <ul class="objective-list">
              <li>Relaciona las sucesiones con <strong>listas de asistencia, folios de cuadernos</strong> o <strong>marcadores de partidos</strong>.</li>
              <li>Pide que las y los estudiantes <strong>digan en voz alta</strong> la sucesi√≥n mientras completan los n√∫meros.</li>
              <li>Invita a que inventen su propia sucesi√≥n y la compartan con el grupo para que otros la completen.</li>
            </ul>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <div>
        ¬© 2025. Elaborado por <strong>Mtro. Mart√≠n Reta</strong> ‚Äì Escuela Primaria ‚ÄúGral. L√°zaro C√°rdenas‚Äù.
      </div>
      <div class="project">
        Proyecto ‚ÄúN√∫meros que cuentan historias‚Äù ¬∑ ODA: La sucesi√≥n num√©rica (din√°mica).
      </div>
    </footer>
  </div>

  <script>
    // Utilidades
    function randInt(min, max){
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    // Navegaci√≥n de m√≥dulos
    const moduleButtons = document.querySelectorAll(".module-button");
    const panels = {
      explora: document.getElementById("panel-explora"),
      asc: document.getElementById("panel-asc"),
      desc: document.getElementById("panel-desc"),
      evalua: document.getElementById("panel-evalua")
    };
    moduleButtons.forEach(btn=>{
      btn.addEventListener("click",()=>{
        const mod = btn.dataset.module;
        moduleButtons.forEach(b=>b.classList.remove("active"));
        btn.classList.add("active");
        Object.keys(panels).forEach(k=>panels[k].classList.remove("active"));
        panels[mod].classList.add("active");
      });
    });

    // Estado de resultados
    let lastExploraScore=null,
        lastAscScore=null,
        lastDescScore=null,
        lastEvaluaScore=null;

    // M√ìDULO 1: Explora
    const statusExplora=document.getElementById("statusExplora");
    document.getElementById("btnCheckExplora").addEventListener("click",()=>{
      const ans1=document.querySelector('input[name="ex1"]:checked');
      const ans2=document.querySelector('input[name="ex2"]:checked');
      const ans3=document.querySelector('input[name="ex3"]:checked');
      let total=3,correct=0,unanswered=0,messages=[];
      if(!ans1) unanswered++; else if(ans1.value==="c"){correct++;messages.push("Pregunta 1: correcto, aqu√≠ se suma 1 en cada paso.");}
      else messages.push("Pregunta 1: incorrecto, observa c√≥mo avanza solo un n√∫mero cada vez.");
      if(!ans2) unanswered++; else if(ans2.value==="b"){correct++;messages.push("Pregunta 2: correcto, la sucesi√≥n va hacia atr√°s de 1 en 1.");}
      else messages.push("Pregunta 2: incorrecto, revisa si los n√∫meros suben o bajan.");
      if(!ans3) unanswered++; else if(ans3.value==="b"){correct++;messages.push("Pregunta 3: correcto, despu√©s de 9 999 sigue 10 000 y contin√∫as sumando 1.");}
      else messages.push("Pregunta 3: incorrecto, recuerda que los n√∫meros no se detienen en 9 999.");
      if(unanswered>0){
        statusExplora.className="status status-info";
        statusExplora.innerHTML="<span>‚ÑπÔ∏è</span><div>Te faltan <strong>"+unanswered+"</strong> pregunta(s) por responder.</div>";
        return;
      }
      const percent=Math.round(correct/total*100);
      lastExploraScore={correct,total,percent};
      if(correct>=2){
        statusExplora.className="status status-success";
        statusExplora.innerHTML="<span>‚úÖ</span><div>Acertaste <strong>"+correct+" de "+total+"</strong> preguntas ("+percent+"%).<br>"+messages.join("<br>")+"</div>";
      }else{
        statusExplora.className="status status-error";
        statusExplora.innerHTML="<span>üìò</span><div>Acertaste <strong>"+correct+" de "+total+"</strong> preguntas ("+percent+"%). Puedes volver a leer con calma cada sucesi√≥n.<br>"+messages.join("<br>")+"</div>";
      }
    });
    document.getElementById("btnResetExplora").addEventListener("click",()=>{
      ["ex1","ex2","ex3"].forEach(name=>{
        document.querySelectorAll('input[name="'+name+'"]').forEach(r=>r.checked=false);
      });
      lastExploraScore=null;
      statusExplora.className="status status-info";
      statusExplora.innerHTML="<span>‚ÑπÔ∏è</span><div>Elige una respuesta en cada pregunta y haz clic en <strong>‚ÄúRevisar respuestas‚Äù</strong>.</div>";
    });

    // M√ìDULO 2: Cuenta hacia adelante
    const tableAscBody=document.querySelector("#tableAsc tbody");
    let ascData=[];

    function genAscSequences(){
      ascData=[];
      tableAscBody.innerHTML="";
      for(let i=0;i<3;i++){
        // n√∫mero inicial entre 10 y 999 990 aprox, para que no pase de 6 cifras
        const start=randInt(10,999990);
        const row=document.createElement("tr");
        const cellLabel=document.createElement("td");
        cellLabel.className="sequence-label";
        cellLabel.textContent="Serie "+(i+1);
        row.appendChild(cellLabel);

        const values=[start,start+1,start+2,start+3,start+4];
        ascData.push(values);

        values.forEach((val,idx)=>{
          const td=document.createElement("td");
          if(idx===0){
            td.textContent=val;
          }else{
            const inp=document.createElement("input");
            inp.type="number";
            inp.setAttribute("data-row",i);
            inp.setAttribute("data-pos",idx);
            td.appendChild(inp);
          }
          row.appendChild(td);
        });
        tableAscBody.appendChild(row);
      }
    }
    genAscSequences();

    const statusAsc=document.getElementById("statusAsc");
    document.getElementById("btnGenAsc").addEventListener("click",()=>{
      genAscSequences();
      statusAsc.className="status status-info";
      statusAsc.innerHTML="<span>‚ÑπÔ∏è</span><div>Se generaron nuevas sucesiones. Compl√©talas y haz clic en <strong>‚ÄúRevisar‚Äù</strong>.</div>";
      lastAscScore=null;
    });
    document.getElementById("btnCheckAsc").addEventListener("click",()=>{
      const inputs=tableAscBody.querySelectorAll("input[type='number']");
      let total=0,correct=0,empty=0;
      inputs.forEach(inp=>{
        const row=parseInt(inp.getAttribute("data-row"),10);
        const pos=parseInt(inp.getAttribute("data-pos"),10);
        const expected=ascData[row][pos];
        total++;
        const val=inp.value.trim();
        if(val===""){empty++;return;}
        if(parseInt(val,10)===expected){correct++;}
      });
      if(empty>0){
        statusAsc.className="status status-info";
        statusAsc.innerHTML="<span>‚ÑπÔ∏è</span><div>Te faltan <strong>"+empty+"</strong> espacio(s) por completar.</div>";
        return;
      }
      const percent=Math.round(correct/total*100);
      lastAscScore={correct,total,percent};
      if(percent>=70){
        statusAsc.className="status status-success";
        statusAsc.innerHTML="<span>‚úÖ</span><div>¬°Muy bien! Respondiste correctamente <strong>"+correct+" de "+total+"</strong> espacios ("+percent+"%). Est√°s contando hacia adelante de forma precisa.</div>";
      }else{
        statusAsc.className="status status-error";
        statusAsc.innerHTML="<span>üìò</span><div>Respondiste correctamente <strong>"+correct+" de "+total+"</strong> espacios ("+percent+"%). Revisa con calma c√≥mo avanzan los n√∫meros de uno en uno.</div>";
      }
    });
    document.getElementById("btnResetAsc").addEventListener("click",()=>{
      tableAscBody.querySelectorAll("input[type='number']").forEach(inp=>inp.value="");
      lastAscScore=null;
      statusAsc.className="status status-info";
      statusAsc.innerHTML="<span>‚ÑπÔ∏è</span><div>Escribe los n√∫meros que siguen hacia adelante y luego haz clic en <strong>‚ÄúRevisar‚Äù</strong>.</div>";
    });

    // M√ìDULO 3: Cuenta hacia atr√°s
    const tableDescBody=document.querySelector("#tableDesc tbody");
    let descData=[];

    function genDescSequences(){
      descData=[];
      tableDescBody.innerHTML="";
      for(let i=0;i<3;i++){
        const start=randInt(20,999999); // que tenga espacio para restar
        const row=document.createElement("tr");
        const cellLabel=document.createElement("td");
        cellLabel.className="sequence-label";
        cellLabel.textContent="Serie "+(i+1);
        row.appendChild(cellLabel);

        const values=[start,start-1,start-2,start-3,start-4];
        descData.push(values);

        values.forEach((val,idx)=>{
          const td=document.createElement("td");
          if(idx===0){
            td.textContent=val;
          }else{
            const inp=document.createElement("input");
            inp.type="number";
            inp.setAttribute("data-row",i);
            inp.setAttribute("data-pos",idx);
            td.appendChild(inp);
          }
          row.appendChild(td);
        });
        tableDescBody.appendChild(row);
      }
    }
    genDescSequences();

    const statusDesc=document.getElementById("statusDesc");
    document.getElementById("btnGenDesc").addEventListener("click",()=>{
      genDescSequences();
      statusDesc.className="status status-info";
      statusDesc.innerHTML="<span>‚ÑπÔ∏è</span><div>Se generaron nuevas sucesiones. Compl√©talas y haz clic en <strong>‚ÄúRevisar‚Äù</strong>.</div>";
      lastDescScore=null;
    });
    document.getElementById("btnCheckDesc").addEventListener("click",()=>{
      const inputs=tableDescBody.querySelectorAll("input[type='number']");
      let total=0,correct=0,empty=0;
      inputs.forEach(inp=>{
        const row=parseInt(inp.getAttribute("data-row"),10);
        const pos=parseInt(inp.getAttribute("data-pos"),10);
        const expected=descData[row][pos];
        total++;
        const val=inp.value.trim();
        if(val===""){empty++;return;}
        if(parseInt(val,10)===expected){correct++;}
      });
      if(empty>0){
        statusDesc.className="status status-info";
        statusDesc.innerHTML="<span>‚ÑπÔ∏è</span><div>Te faltan <strong>"+empty+"</strong> espacio(s) por completar.</div>";
        return;
      }
      const percent=Math.round(correct/total*100);
      lastDescScore={correct,total,percent};
      if(percent>=70){
        statusDesc.className="status status-success";
        statusDesc.innerHTML="<span>‚úÖ</span><div>¬°Excelente! Respondiste correctamente <strong>"+correct+" de "+total+"</strong> espacios ("+percent+"%). Manejas bien el conteo hacia atr√°s.</div>";
      }else{
        statusDesc.className="status status-error";
        statusDesc.innerHTML="<span>üìò</span><div>Respondiste correctamente <strong>"+correct+" de "+total+"</strong> espacios ("+percent+"%). Practica de nuevo el conteo hacia atr√°s, restando 1 cada vez.</div>";
      }
    });
    document.getElementById("btnResetDesc").addEventListener("click",()=>{
      tableDescBody.querySelectorAll("input[type='number']").forEach(inp=>inp.value="");
      lastDescScore=null;
      statusDesc.className="status status-info";
      statusDesc.innerHTML="<span>‚ÑπÔ∏è</span><div>Escribe los n√∫meros que van hacia atr√°s y luego haz clic en <strong>‚ÄúRevisar‚Äù</strong>.</div>";
    });

    // M√ìDULO 4: Eval√∫ate
    const statusEvalua=document.getElementById("statusEvalua");
    const correctEval={ev1:"b",ev2:"b",ev3:"b",ev4:"a"};
    document.getElementById("btnCheckEvalua").addEventListener("click",()=>{
      let total=4,correct=0,unanswered=0,messages=[];
      Object.keys(correctEval).forEach(q=>{
        const ans=document.querySelector('input[name="'+q+'"]:checked');
        if(!ans){unanswered++;return;}
        if(ans.value===correctEval[q]){
          correct++;
          messages.push("Pregunta "+q.replace("ev","")+": ‚úÖ correcta.");
        }else{
          messages.push("Pregunta "+q.replace("ev","")+": revisa de nuevo la sucesi√≥n.");
        }
      });
      if(unanswered>0){
        statusEvalua.className="status status-info";
        statusEvalua.innerHTML="<span>‚ÑπÔ∏è</span><div>Te faltan <strong>"+unanswered+"</strong> pregunta(s) por responder.</div>";
        return;
      }
      const percent=Math.round(correct/total*100);
      lastEvaluaScore={correct,total,percent};
      if(correct>=3){
        statusEvalua.className="status status-success";
        statusEvalua.innerHTML="<span>‚úÖ</span><div>Acertaste <strong>"+correct+" de "+total+"</strong> preguntas ("+percent+"%). ¬°Buen dominio de las sucesiones num√©ricas!<br>"+messages.join("<br>")+"</div>";
      }else{
        statusEvalua.className="status status-error";
        statusEvalua.innerHTML="<span>üìò</span><div>Acertaste <strong>"+correct+" de "+total+"</strong> preguntas ("+percent+"%). Puedes volver a practicar en los otros m√≥dulos y despu√©s intentarlo otra vez.<br>"+messages.join("<br>")+"</div>";
      }
    });
    document.getElementById("btnResetEvalua").addEventListener("click",()=>{
      Object.keys(correctEval).forEach(q=>{
        document.querySelectorAll('input[name="'+q+'"]').forEach(r=>r.checked=false);
      });
      lastEvaluaScore=null;
      statusEvalua.className="status status-info";
      statusEvalua.innerHTML="<span>‚ÑπÔ∏è</span><div>Responde todas las preguntas y haz clic en <strong>‚ÄúRevisar respuestas‚Äù</strong> para ver tu resultado.</div>";
    });

    // Audio instrucciones (voz masculina en lo posible)
    const btnPlayVoice=document.getElementById("btnPlayVoice");
    const instructionsText="Hola, soy el maestro Martin Reta. Primero explora las sucesiones y descubre la regla que siguen los numeros. Despues completa las series contando hacia adelante de uno en uno. Luego practica el conteo hacia atras. Al final responde el cuestionario para revisar que tanto dominas la sucesion numerica hasta seis cifras.";
    function speakInstructions(){
      if(!('speechSynthesis' in window)){
        alert("Tu navegador no permite la lectura en voz alta. Puedes leer las instrucciones directamente en pantalla.");
        return;
      }
      window.speechSynthesis.cancel();
      const u=new SpeechSynthesisUtterance(instructionsText);
      u.lang="es-MX";
      const voices=window.speechSynthesis.getVoices();
      let chosen=null;
      if(voices && voices.length){
        chosen = voices.find(v=>v.lang.startsWith("es") && /Hombre|Male|Miguel|Diego|Jorge|Antonio|Carlos/i.test(v.name))
               || voices.find(v=>v.lang.startsWith("es"))
               || voices[0];
      }
      if(chosen){u.voice=chosen;}
      window.speechSynthesis.speak(u);
    }
    btnPlayVoice.addEventListener("click",()=>{
      const voices=window.speechSynthesis.getVoices();
      if(!voices || !voices.length){
        window.speechSynthesis.onvoiceschanged=speakInstructions;
        window.speechSynthesis.getVoices();
      }else{
        speakInstructions();
      }
    });

    // Imprimir resultados
    document.getElementById("btnPrintResults").addEventListener("click",()=>{
      const studentName=document.getElementById("studentName").value.trim();
      if(!lastExploraScore && !lastAscScore && !lastDescScore && !lastEvaluaScore){
        alert("Primero realiza al menos un m√≥dulo para poder imprimir resultados.");
        return;
      }
      const w=window.open("","_blank");
      w.document.write("<html><head><title>Resultados del estudiante ‚Äì Sucesi√≥n num√©rica</title>");
      w.document.write('<style>body{font-family:system-ui,Arial,sans-serif;font-size:13px;padding:16px;color:#111827;} h1{font-size:20px;margin-bottom:4px;} h2{font-size:16px;margin-top:16px;margin-bottom:6px;} p{margin:4px 0;} ul{padding-left:18px;} li{margin-bottom:3px;} .small{font-size:12px;color:#4b5563;} .blue{color:#1d4ed8;} .red{color:#b91c1c;}</style>');
      w.document.write("</head><body>");
      w.document.write("<h1>Resultados del estudiante ‚Äì La sucesi√≥n num√©rica (din√°mica)</h1>");
      w.document.write("<p><strong>Nombre del alumno(a):</strong> "+(studentName||"______________________________")+"</p>");
      w.document.write("<p><strong>Docente:</strong> Mtro. Mart√≠n Reta</p>");
      w.document.write("<p><strong>Proyecto:</strong> N√∫meros que cuentan historias</p>");
      w.document.write("<p class='small'><strong>PDA:</strong> Expresa oralmente la sucesi√≥n num√©rica hasta seis cifras, en espa√±ol y hasta donde sea posible, en su lengua materna, de manera ascendente y descendente a partir de un n√∫mero natural dado.</p>");

      if(lastExploraScore){
        w.document.write("<h2>M√≥dulo 1. Explora las sucesiones</h2>");
        w.document.write("<p>Puntaje: <span class='blue'>"+lastExploraScore.correct+" de "+lastExploraScore.total+" ("+lastExploraScore.percent+"%)</span></p>");
      }
      if(lastAscScore){
        w.document.write("<h2>M√≥dulo 2. Cuenta hacia adelante</h2>");
        w.document.write("<p>Puntaje: <span class='blue'>"+lastAscScore.correct+" de "+lastAscScore.total+" ("+lastAscScore.percent+"%)</span></p>");
      }
      if(lastDescScore){
        w.document.write("<h2>M√≥dulo 3. Cuenta hacia atr√°s</h2>");
        w.document.write("<p>Puntaje: <span class='blue'>"+lastDescScore.correct+" de "+lastDescScore.total+" ("+lastDescScore.percent+"%)</span></p>");
      }
      if(lastEvaluaScore){
        const color = lastEvaluaScore.percent>=70 ? "blue" : "red";
        w.document.write("<h2>M√≥dulo 4. Eval√∫ate</h2>");
        w.document.write("<p>Puntaje total: <span class='"+color+"'>"+lastEvaluaScore.correct+" de "+lastEvaluaScore.total+" ("+lastEvaluaScore.percent+"%)</span></p>");
      }

      w.document.write("<p class='small'><strong>Observaciones del docente:</strong></p>");
      w.document.write("<p class='small'>______________________________________________</p>");
      w.document.write("<p class='small'>______________________________________________</p>");
      w.document.write("<p class='small'>______________________________________________</p>");
      w.document.write("</body></html>");
      w.document.close();
      w.print();
    });

    // Actividad para imprimir (distinta a las actividades internas)
    document.getElementById("btnPrintActivity").addEventListener("click",()=>{
      const studentName=document.getElementById("studentName").value.trim();
      const w=window.open("","_blank");
      w.document.write("<html><head><title>Actividad para imprimir ‚Äì La sucesi√≥n num√©rica</title>");
      w.document.write('<style>body{font-family:system-ui,Arial,sans-serif;font-size:13px;padding:16px;color:#111827;} h1{font-size:20px;margin-bottom:4px;} h2{font-size:16px;margin-top:16px;margin-bottom:6px;} p{margin:6px 0;} ol{padding-left:18px;} li{margin-bottom:6px;} .small{font-size:12px;color:#4b5563;} table{border-collapse:collapse;width:100%;margin-top:6px;} th,td{border:1px solid #e5e7eb;padding:4px 6px;text-align:center;font-size:12px;} th{background:#eff6ff;} .serie{text-align:left;font-weight:600;}</style>');
      w.document.write("</head><body>");
      w.document.write("<h1>Actividad para imprimir ‚Äì La sucesi√≥n num√©rica</h1>");
      w.document.write("<p><strong>Nombre del alumno(a):</strong> "+(studentName||"______________________________")+"</p>");
      w.document.write("<p><strong>Docente:</strong> Mtro. Mart√≠n Reta &nbsp;&nbsp;&nbsp; <strong>Proyecto:</strong> N√∫meros que cuentan historias</p>");
      w.document.write("<p class='small'><strong>PDA:</strong> Expresa oralmente la sucesi√≥n num√©rica hasta seis cifras, en espa√±ol y hasta donde sea posible, en su lengua materna, de manera ascendente y descendente a partir de un n√∫mero natural dado.</p>");

      w.document.write("<h2>Parte A. Cuenta hacia adelante</h2>");
      w.document.write("<p>Completa las siguientes sucesiones contando hacia adelante de uno en uno.</p>");
      w.document.write("<table><tr><th class='serie'>Serie</th><th colspan='6'>Sucesi√≥n</th></tr>");
      for(let i=1;i<=4;i++){
        const start=randInt(10,999990);
        w.document.write("<tr><td class='serie'>A"+i+"</td>");
        for(let j=0;j<6;j++){
          if(j===0){
            w.document.write("<td>"+(start+j)+"</td>");
          }else{
            w.document.write("<td>__________</td>");
          }
        }
        w.document.write("</tr>");
      }
      w.document.write("</table>");

      w.document.write("<h2>Parte B. Cuenta hacia atr√°s</h2>");
      w.document.write("<p>Completa las siguientes sucesiones contando hacia atr√°s de uno en uno.</p>");
      w.document.write("<table><tr><th class='serie'>Serie</th><th colspan='6'>Sucesi√≥n</th></tr>");
      for(let i=1;i<=4;i++){
        const start=randInt(40,999999);
        w.document.write("<tr><td class='serie'>B"+i+"</td>");
        for(let j=0;j<6;j++){
          if(j===0){
            w.document.write("<td>"+(start-j)+"</td>");
          }else{
            w.document.write("<td>__________</td>");
          }
        }
        w.document.write("</tr>");
      }
      w.document.write("</table>");

      w.document.write("<h2>Parte C. Explica con palabras</h2>");
      w.document.write("<p>Responde en el reverso o en tu cuaderno:</p>");
      w.document.write("<ol>");
      w.document.write("<li>¬øQu√© significa contar hacia adelante de uno en uno? Escribe un ejemplo con n√∫meros de tres o m√°s cifras.</li>");
      w.document.write("<li>¬øQu√© significa contar hacia atr√°s de uno en uno? Escribe otro ejemplo.</li>");
      w.document.write("<li>Menciona una situaci√≥n de tu vida diaria en la que uses la sucesi√≥n num√©rica (por ejemplo, al esperar tu turno o al revisar folios de cuadernos).</li>");
      w.document.write("</ol>");

      w.document.write("</body></html>");
      w.document.close();
      w.print();
    });
  </script>
</body>
</html>
