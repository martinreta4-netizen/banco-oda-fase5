<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>ODA ‚Äì Mejoro mi autobiograf√≠a con sugerencias</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root{
      --primary:#b91c1c;
      --primary-soft:#fef2f2;
      --accent:#fb923c;
      --text:#111827;
      --muted:#6b7280;
      --border:#fecaca;
      --card:#ffffff;
      --shadow:0 16px 35px rgba(127,29,29,.18);
    }
    *{box-sizing:border-box;}
    body{
      margin:0;
      font-family:system-ui,-apple-system,"Segoe UI",sans-serif;
      background:linear-gradient(180deg,#fff7ed 0,#fef2f2 40%,#f9fafb 100%);
      color:var(--text);
      min-height:100vh;
      display:flex;
      justify-content:center;
      padding:14px 10px;
      position:relative;
    }
    .school-logo-fixed{
      position:fixed;
      right:16px;
      bottom:10px;
      height:86px;
      opacity:0.95;
      z-index:5;
      pointer-events:none;
    }
    .wrapper{
      position:relative;
      z-index:1;
      width:100%;
      max-width:1180px;
      background:radial-gradient(circle at top left,#fee2e2 0,#ffffff 45%,#fef2f2 100%);
      border-radius:26px;
      box-shadow:var(--shadow);
      padding:14px 16px 16px;
      display:flex;
      flex-direction:column;
      gap:12px;
      border:1px solid #fed7d7;
    }
    header{
      display:grid;
      grid-template-columns:auto minmax(0,2.4fr) auto;
      gap:10px;
      align-items:center;
      padding-bottom:8px;
      border-bottom:1px solid #fee2e2;
    }
    @media(max-width:900px){
      header{
        grid-template-columns:1fr;
        text-align:center;
      }
      .header-logos{justify-content:center;}
    }
    .header-logos{
      display:flex;
      align-items:center;
      gap:8px;
    }
    .header-logos img{
      max-height:54px;
      width:auto;
      display:block;
    }
    .title-block h1{
      margin:0;
      font-size:1.22rem;
      display:flex;
      align-items:center;
      gap:8px;
      flex-wrap:wrap;
      color:#7f1d1d;
    }
    .title-block h1 .icon{
      font-size:1.45rem;
    }
    .title-meta{
      margin-top:3px;
      font-size:.84rem;
      color:var(--muted);
    }
    .phase-label{
      display:inline-flex;
      align-items:center;
      gap:4px;
      margin-top:3px;
      font-size:.8rem;
      font-weight:600;
      color:#7f1d1d;
      padding:2px 8px;
      border-radius:999px;
      background:#fee2e2;
    }
    .author-block{
      font-size:.78rem;
      color:#4b5563;
      text-align:right;
    }
    @media(max-width:900px){
      .author-block{text-align:center;}
    }
    .author-block strong{
      display:block;
      font-size:.86rem;
      color:#111827;
    }
    .top-row{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      justify-content:space-between;
    }
    .student-name{
      display:flex;
      flex-direction:column;
      gap:4px;
      font-size:.82rem;
      background:#fff;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid #fecaca;
    }
    .student-name label{
      font-weight:600;
      color:#374151;
    }
    .student-name input{
      border:none;
      outline:none;
      font-size:.9rem;
      min-width:180px;
    }
    .avatar-row{
      display:flex;
      align-items:center;
      gap:8px;
      background:#fee2e2;
      border-radius:999px;
      padding:5px 9px;
      border:1px solid #fecaca;
    }
    .avatar-row img{
      height:56px;
      width:auto;
      display:block;
    }
    .avatar-text{
      font-size:.8rem;
      color:#7f1d1d;
    }
    .btn-voice{
      border-radius:999px;
      border:none;
      background:#b91c1c;
      color:#fff;
      padding:5px 10px;
      font-size:.8rem;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:6px;
      box-shadow:0 6px 18px rgba(127,29,29,.4);
    }
    .btn-voice span{
      font-size:1rem;
    }
    .ejes-row{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      margin-top:4px;
      font-size:.75rem;
    }
    .chip{
      border-radius:999px;
      padding:2px 9px;
      border:1px solid #fed7d7;
      background:#fff1f2;
      color:#b91c1c;
      display:inline-flex;
      align-items:center;
      gap:6px;
    }
    .chip .dot{
      width:8px;
      height:8px;
      border-radius:50%;
      background:#b91c1c;
    }
    .steps-bar{
      margin-top:4px;
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      background:#fee2e2;
      border-radius:999px;
      padding:6px;
      border:1px solid #fecaca;
    }
    .step-tab{
      flex:1 1 140px;
      border-radius:999px;
      border:1px solid transparent;
      padding:5px 10px;
      font-size:.82rem;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:6px;
      cursor:pointer;
      color:#7f1d1d;
      background:#fff;
      transition:.2s ease;
    }
    .step-left{
      display:flex;
      align-items:center;
      gap:6px;
    }
    .step-circle{
      width:22px;
      height:22px;
      border-radius:999px;
      border:2px solid #fecaca;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:.78rem;
      font-weight:600;
      background:#fff5f5;
    }
    .step-label-main{
      font-weight:600;
    }
    .step-label-sub{
      font-size:.74rem;
      color:#9f1239;
    }
    .step-tab.active{
      background:linear-gradient(90deg,#b91c1c,#f97316);
      border-color:#b91c1c;
      color:#fff;
      box-shadow:0 10px 22px rgba(185,28,28,.45);
    }
    .step-tab.active .step-circle{
      background:#fff;
      border-color:#fee2e2;
      color:#b91c1c;
    }
    .step-icon-right{
      font-size:.95rem;
    }
    main{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-top:6px;
    }
    .card{
      background:var(--card);
      border-radius:18px;
      border:1px solid var(--border);
      padding:10px 11px;
    }
    .card h2{
      margin:0 0 4px;
      font-size:.98rem;
      color:#7f1d1d;
      display:flex;
      align-items:center;
      gap:6px;
    }
    .card h2 .icon{
      font-size:1.1rem;
    }
    .card p{
      font-size:.86rem;
      color:#374151;
      margin:.15rem 0;
    }
    .two-col{
      display:grid;
      grid-template-columns:minmax(0,1.4fr) minmax(0,1.1fr);
      gap:10px;
    }
    @media(max-width:900px){
      .two-col{grid-template-columns:1fr;}
    }
    .example-box{
      border-radius:14px;
      padding:8px 10px;
      background:#fff7ed;
      border:1px solid #fed7aa;
      font-size:.84rem;
      color:#7c2d12;
    }
    .example-label{
      font-size:.78rem;
      font-weight:600;
      text-transform:uppercase;
      letter-spacing:.04em;
      color:#c2410c;
      margin-bottom:3px;
    }
    .list{
      margin:4px 0 0;
      padding-left:18px;
      font-size:.85rem;
    }
    .list li{margin-bottom:3px;}
    textarea,input[type="text"]{
      width:100%;
      border-radius:10px;
      border:1px solid #e5e7eb;
      padding:5px 7px;
      font-family:inherit;
      font-size:.86rem;
      resize:vertical;
    }
    textarea{min-height:80px;}
    .mini-title{
      font-weight:600;
      font-size:.86rem;
      color:#7f1d1d;
      margin-top:4px;
    }
    .vf-row{
      margin-top:4px;
      padding:6px 7px;
      border-radius:10px;
      background:#f9fafb;
      border:1px solid #e5e7eb;
      font-size:.84rem;
    }
    .vf-row label{margin-right:8px;}
    .btn-row{
      margin-top:6px;
      display:flex;
      flex-wrap:wrap;
      gap:6px;
    }
    .btn{
      border-radius:999px;
      border:none;
      font-size:.8rem;
      padding:6px 10px;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:6px;
      font-weight:600;
    }
    .btn-primary{
      background:var(--primary);
      color:#fff;
    }
    .btn-secondary{
      background:#f3f4f6;
      color:#111827;
    }
    .btn-outline{
      background:#fff;
      color:#b91c1c;
      border:1px solid #fecaca;
    }
    .step-panel{display:none;font-size:.86rem;}
    .step-panel.active{display:block;}
    .results-card{
      font-size:.84rem;
    }
    .result-good{color:#166534;font-weight:600;}
    .result-bad{color:#b91c1c;font-weight:600;}
    .chips-row-small{
      display:flex;
      flex-wrap:wrap;
      gap:4px;
      margin-top:4px;
      font-size:.76rem;
    }
    .chip-soft{
      padding:2px 8px;
      border-radius:999px;
      background:#fee2e2;
      border:1px solid #fecaca;
      color:#7f1d1d;
    }
    footer{
      margin-top:4px;
      padding-top:7px;
      border-top:1px solid #fee2e2;
      font-size:.78rem;
      color:#6b7280;
      display:flex;
      justify-content:space-between;
      flex-wrap:wrap;
      gap:6px;
    }
    footer .project{
      font-style:italic;
      color:#4b5563;
    }
    @media print{
      body{
        background:#ffffff;
        padding:0;
      }
      .school-logo-fixed{position:fixed;right:8px;bottom:8px;height:60px;}
      .btn-row,.steps-bar,.avatar-row,.ejes-row{display:none!important;}
      .wrapper{
        box-shadow:none;
        border:none;
        border-radius:0;
      }
    }
  </style>
</head>
<body>
  <img src="escudo_escuela.png" alt="Escudo escuela" class="school-logo-fixed">
  <div class="wrapper">
    <header>
      <div class="header-logos">
        <img src="sep_logo.png" alt="Secretar√≠a de Educaci√≥n P√∫blica">
      </div>
      <div class="title-block">
        <h1>
          <span class="icon">ü§ù</span>
          <span>ODA ‚Äì Mejoro mi autobiograf√≠a con sugerencias</span>
        </h1>
        <div class="title-meta">
          Contenido: <strong>Narraci√≥n de sucesos autobiogr√°ficos.</strong><br>
          PDA: <strong>Hace y recibe sugerencias sobre aspectos de mejora, y comparte con la comunidad educativa las versiones finales.</strong><br>
          <span class="phase-label">Lenguajes ¬∑ Fase 5</span>
        </div>
      </div>
      <div class="author-block">
        <strong>Autor: Mtro. Mart√≠n Reta</strong>
        Escuela Primaria ‚ÄúGral. L√°zaro C√°rdenas‚Äù<br>
        Ejido Santa Mar√≠a, Pesquer√≠a, N.L.
      </div>
    </header>

    <div class="top-row">
      <div class="student-name">
        <label for="studentName">Nombre del alumno(a):</label>
        <input type="text" id="studentName" placeholder="Escribe tu nombre aqu√≠">
      </div>
      <div class="avatar-row">
        <img src="avatar_guia.png" alt="Avatar del Mtro. Mart√≠n Reta">
        <div class="avatar-text">
          <strong>Hola, soy el maestro Mart√≠n.</strong><br>
          Hoy aprenderemos a dar y recibir sugerencias para mejorar tu autobiograf√≠a y compartirla con otros.
        </div>
        <button class="btn-voice" type="button" onclick="playGuide()">
          <span>üîä</span> Escuchar instrucciones
        </button>
      </div>
    </div>

    <div class="ejes-row">
      <span class="chip"><span class="dot"></span>Inclusi√≥n</span>
      <span class="chip"><span class="dot"></span>Pensamiento cr√≠tico</span>
      <span class="chip"><span class="dot"></span>Lenguajes para la vida</span>
      <span class="chip"><span class="dot"></span>Interculturalidad cr√≠tica</span>
    </div>

    <div class="steps-bar">
      <button class="step-tab active" data-step="1" onclick="setStep(1)">
        <div class="step-left">
          <div class="step-circle">1</div>
          <div>
            <div class="step-label-main">Comprendo la retroalimentaci√≥n</div>
            <div class="step-label-sub">Comentarios que ayudan</div>
          </div>
        </div>
        <span class="step-icon-right">‚ûú</span>
      </button>
      <button class="step-tab" data-step="2" onclick="setStep(2)">
        <div class="step-left">
          <div class="step-circle">2</div>
          <div>
            <div class="step-label-main">Analizo sugerencias</div>
            <div class="step-label-sub">¬øCu√°les sirven m√°s?</div>
          </div>
        </div>
        <span class="step-icon-right">‚ûú</span>
      </button>
      <button class="step-tab" data-step="3" onclick="setStep(3)">
        <div class="step-left">
          <div class="step-circle">3</div>
          <div>
            <div class="step-label-main">Mejoro mi texto</div>
            <div class="step-label-sub">Antes y despu√©s</div>
          </div>
        </div>
        <span class="step-icon-right">‚ûú</span>
      </button>
      <button class="step-tab" data-step="4" onclick="setStep(4)">
        <div class="step-left">
          <div class="step-circle">4</div>
          <div>
            <div class="step-label-main">Comparto y reflexiono</div>
            <div class="step-label-sub">Hoja de resultados</div>
          </div>
        </div>
        <span class="step-icon-right">‚úì</span>
      </button>
    </div>

    <main>
      <!-- PASO 1 -->
      <section class="card step-panel active" id="step-1">
        <h2><span class="icon">üí¨</span><span>Paso 1. ¬øQu√© es una buena sugerencia?</span></h2>
        <div class="two-col">
          <div>
            <p>Dar una sugerencia no es rega√±ar ni burlarse. Es decirle a alguien, con respeto, <strong>qu√© puede mejorar</strong> y <strong>c√≥mo hacerlo</strong>.</p>
            <ul class="list">
              <li>Hablo del <strong>texto</strong>, no de la persona.</li>
              <li>Uso frases como: <em>‚Äúpodr√≠as‚Ä¶‚Äù, ‚Äúte sugiero‚Ä¶‚Äù, ‚Äúquiz√° te ayude‚Ä¶‚Äù</em>.</li>
              <li>Digo <strong>qu√©</strong> me gusta y <strong>qu√©</strong> se puede mejorar.</li>
              <li>Evito palabras ofensivas o burlonas.</li>
            </ul>
            <p class="mini-title">Ejemplo</p>
            <div class="example-box">
              <p><strong>Mala sugerencia:</strong> ‚ÄúTu texto est√° feo, no se entiende nada.‚Äù</p>
              <p><strong>Buena sugerencia:</strong> ‚ÄúTu historia es interesante. Podr√≠as agregar m√°s detalles cuando llegas a la escuela para que imaginemos mejor qu√© sentiste.‚Äù</p>
            </div>
          </div>
          <div>
            <div class="example-box">
              <div class="example-label">Actividad 1 ¬∑ ¬øQu√© sugerencias ayudan?</div>
              <p>Imagina que un compa√±ero te muestra su autobiograf√≠a. ¬øCu√°les sugerencias ser√≠an √∫tiles?</p>
              <div class="vf-row">
                <p><strong>a)</strong> ‚ÄúTu texto est√° bien, ya no le muevas.‚Äù</p>
                <label><input type="checkbox" id="sug1"> Es √∫til</label>
              </div>
              <div class="vf-row">
                <p><strong>b)</strong> ‚ÄúMe gust√≥ el final. Podr√≠as explicar un poco m√°s qu√© aprendiste de esa experiencia.‚Äù</p>
                <label><input type="checkbox" id="sug2"> Es √∫til</label>
              </div>
              <div class="vf-row">
                <p><strong>c)</strong> ‚ÄúNo entiendo mucho cuando cuentas lo del cami√≥n. Tal vez podr√≠as poner m√°s detalles o separar en dos oraciones.‚Äù</p>
                <label><input type="checkbox" id="sug3"> Es √∫til</label>
              </div>
              <div class="btn-row">
                <button class="btn btn-primary" type="button" onclick="checkStep1()">Comprobar respuestas</button>
              </div>
              <div id="fbStep1" style="margin-top:4px;font-size:.82rem;"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- PASO 2 -->
      <section class="card step-panel" id="step-2">
        <h2><span class="icon">üßê</span><span>Paso 2. Analizo sugerencias sobre un texto</span></h2>
        <p>Lee el siguiente fragmento autobiogr√°fico y las sugerencias que recibi√≥.</p>
        <div class="example-box">
          <div class="example-label">Texto de ejemplo</div>
          <p>
            Ese d√≠a llegu√© tarde a la escuela. Camin√© muy r√°pido pero aun as√≠ escuch√© la campana cuando iba a la mitad del camino. Entr√© al sal√≥n sin decir nada y me sent√© en mi lugar. Sent√≠a que todos me miraban y me dio mucha pena.
          </p>
        </div>
        <p class="mini-title">Sugerencias que recibi√≥:</p>
        <ol class="list">
          <li><strong>S1:</strong> ‚ÄúPodr√≠as describir un poco m√°s c√≥mo era el camino para imaginar por d√≥nde ibas.‚Äù</li>
          <li><strong>S2:</strong> ‚ÄúNo me gust√≥.‚Äù</li>
          <li><strong>S3:</strong> ‚ÄúTal vez puedes explicar qu√© pensaste cuando todos te miraban.‚Äù</li>
          <li><strong>S4:</strong> ‚ÄúTu letra est√° fea.‚Äù</li>
        </ol>
        <p class="mini-title">Clasifica cada sugerencia:</p>
        <div class="vf-row">
          <p><strong>S1</strong> es‚Ä¶</p>
          <label><input type="radio" name="c1" value="ayuda"> Sugerencia que ayuda</label>
          <label><input type="radio" name="c1" value="no"> No ayuda</label>
        </div>
        <div class="vf-row">
          <p><strong>S2</strong> es‚Ä¶</p>
          <label><input type="radio" name="c2" value="ayuda"> Sugerencia que ayuda</label>
          <label><input type="radio" name="c2" value="no"> No ayuda</label>
        </div>
        <div class="vf-row">
          <p><strong>S3</strong> es‚Ä¶</p>
          <label><input type="radio" name="c3" value="ayuda"> Sugerencia que ayuda</label>
          <label><input type="radio" name="c3" value="no"> No ayuda</label>
        </div>
        <div class="vf-row">
          <p><strong>S4</strong> es‚Ä¶</p>
          <label><input type="radio" name="c4" value="ayuda"> Sugerencia que ayuda</label>
          <label><input type="radio" name="c4" value="no"> No ayuda</label>
        </div>
        <div class="btn-row">
          <button class="btn btn-primary" type="button" onclick="checkStep2()">Comprobar clasificaci√≥n</button>
        </div>
        <div id="fbStep2" style="margin-top:4px;font-size:.82rem;"></div>
      </section>

      <!-- PASO 3 -->
      <section class="card step-panel" id="step-3">
        <h2><span class="icon">‚úçÔ∏è</span><span>Paso 3. Mejoro mi texto: antes y despu√©s</span></h2>
        <p>Piensa en un fragmento de tu autobiograf√≠a (puede ser uno que ya escribiste en otra ODA). Escr√≠belo primero <strong>como est√° ahora</strong> y luego escribe una versi√≥n <strong>mejorada</strong> despu√©s de recibir sugerencias.</p>
        <p class="mini-title">Mi texto antes de las sugerencias:</p>
        <textarea id="textBefore" placeholder="Escribe aqu√≠ tu fragmento tal como lo tienes ahora."></textarea>
        <p class="mini-title">Sugerencias que recib√≠ (de un compa√±ero, maestra o familia):</p>
        <textarea id="textSug" placeholder="Ejemplo: Me dijeron que agregara m√°s detalles del lugar y que separara las ideas en dos p√°rrafos."></textarea>
        <p class="mini-title">Mi texto mejorado (despu√©s de las sugerencias):</p>
        <textarea id="textAfter" placeholder="Reescribe tu fragmento tomando en cuenta las sugerencias."></textarea>
        <div class="btn-row">
          <button class="btn btn-primary" type="button" onclick="quickCheckStep3()">Revisi√≥n r√°pida</button>
        </div>
        <div id="fbStep3" style="margin-top:4px;font-size:.82rem;"></div>
      </section>

      <!-- PASO 4 -->
      <section class="card step-panel" id="step-4">
        <h2><span class="icon">üìÑ</span><span>Paso 4. Hoja de resultados y compartir con la comunidad</span></h2>
        <p>Genera tu hoja de resultados sobre c√≥mo haces y recibes sugerencias para mejorar tu autobiograf√≠a.</p>
        <div class="btn-row">
          <button class="btn btn-primary" type="button" onclick="generateResults()">Generar hoja de resultados</button>
          <button class="btn btn-outline" type="button" onclick="window.print()">üñ®Ô∏è Imprimir actividad</button>
        </div>
        <div id="resultsPanel" class="card results-card" style="margin-top:8px;display:none;">
          <h2><span class="icon">üìä</span><span>Hoja de resultados</span></h2>
          <p><strong>Alumno(a):</strong> <span id="resName"></span></p>
          <ul class="list">
            <li><span id="resR1"></span></li>
            <li><span id="resR2"></span></li>
            <li><span id="resR3"></span></li>
          </ul>
          <p><strong>Comentario del maestro Mart√≠n:</strong></p>
          <p id="resComment"></p>
          <p class="mini-title">¬øC√≥mo compartir√© mi versi√≥n final con la comunidad educativa?</p>
          <textarea id="resShare" placeholder="Ejemplos: leer√© mi texto en voz alta al grupo; haremos un muro de autobiograf√≠as en el sal√≥n; lo compartir√© en una cartulina durante la reuni√≥n con familias, etc."></textarea>
          <p class="mini-title">Mi compromiso al dar y recibir sugerencias:</p>
          <textarea id="resCommit" placeholder="Escribe c√≥mo te comprometes a dar sugerencias respetuosas y a aceptar las que te ayuden a mejorar."></textarea>
          <div class="btn-row">
            <button class="btn btn-outline" type="button" onclick="window.print()">üñ®Ô∏è Imprimir resultados</button>
          </div>
        </div>
      </section>

      <!-- TARJETA EXTRA: FRASES PARA DAR SUGERENCIAS -->
      <section class="card">
        <h2><span class="icon">üß©</span><span>Frases √∫tiles para dar sugerencias</span></h2>
        <p>Estas frases pueden ayudarte a dar sugerencias con respeto. Usa algunas cuando comentes los textos de tus compa√±eros.</p>
        <div class="chips-row-small">
          <span class="chip-soft">Me gust√≥ mucho cuando...</span>
          <span class="chip-soft">Podr√≠as explicar mejor...</span>
          <span class="chip-soft">Quiz√° te ayude agregar...</span>
          <span class="chip-soft">No entend√≠ bien esta parte porque...</span>
          <span class="chip-soft">Tal vez podr√≠as separar en dos oraciones...</span>
          <span class="chip-soft">Te sugiero describir m√°s...</span>
          <span class="chip-soft">Lo que m√°s me gust√≥ fue...</span>
          <span class="chip-soft">¬øQu√© pasar√≠a si agregaras...?</span>
        </div>
      </section>
    </main>

    <footer>
      <span class="project">Proyecto: ‚ÄúMi historia, mi voz, mi camino‚Äù</span>
      <span>Campo formativo: Lenguajes ¬∑ Fase 5</span>
      <span>¬© 2025. Dise√±o de ODA: Mtro. Mart√≠n Reta. Material educativo. Prohibida su venta.</span>
    </footer>
  </div>

  <script>
    function setStep(n){
      document.querySelectorAll('.step-tab').forEach(btn=>{
        btn.classList.toggle('active', Number(btn.dataset.step)===n);
      });
      document.querySelectorAll('.step-panel').forEach((p,idx)=>{
        p.classList.toggle('active', idx===n-1);
      });
    }

    function playGuide(){
      try{
        const msg=new SpeechSynthesisUtterance(
          'En esta ODA vas a practicar c√≥mo dar y recibir sugerencias para mejorar tu autobiograf√≠a y luego compartirla con tu grupo y tu comunidad.'
        );
        msg.lang='es-MX';
        msg.rate=1;
        msg.pitch=1;
        window.speechSynthesis.cancel();
        window.speechSynthesis.speak(msg);
      }catch(e){
        console.error(e);
      }
    }

    function checkStep1(){
      const s1=document.getElementById('sug1').checked;
      const s2=document.getElementById('sug2').checked;
      const s3=document.getElementById('sug3').checked;
      const fb=document.getElementById('fbStep1');
      // Las √∫tiles son b y c, a NO es √∫til
      const ok = (!s1 && s2 && s3);
      if(ok){
        fb.innerHTML='<span class="result-good">‚úî Muy bien. Elegiste las sugerencias que realmente ayudan a mejorar el texto.</span>';
      }else{
        fb.innerHTML='<span class="result-bad">Revisa: una buena sugerencia dice qu√© mejorar y c√≥mo hacerlo, no s√≥lo dice si est√° bien o mal.</span>';
      }
    }

    function checkStep2(){
      const c1=document.querySelector('input[name="c1"]:checked');
      const c2=document.querySelector('input[name="c2"]:checked');
      const c3=document.querySelector('input[name="c3"]:checked');
      const c4=document.querySelector('input[name="c4"]:checked');
      const fb=document.getElementById('fbStep2');
      if(!c1 || !c2 || !c3 || !c4){
        fb.innerHTML='<span class="result-bad">Clasifica todas las sugerencias antes de comprobar.</span>';
        return;
      }
      const ok1=c1.value==='ayuda'; // S1 ayuda
      const ok2=c2.value==='no';    // S2 no ayuda
      const ok3=c3.value==='ayuda'; // S3 ayuda
      const ok4=c4.value==='no';    // S4 no ayuda
      if(ok1 && ok2 && ok3 && ok4){
        fb.innerHTML='<span class="result-good">‚úî Correcto. Sabes distinguir qu√© sugerencias mejoran el texto y cu√°les no aportan.</span>';
      }else{
        fb.innerHTML='<span class="result-bad">Revisa de nuevo. Preg√∫ntate: ¬øesta sugerencia me dice qu√© cambiar o s√≥lo critica?</span>';
      }
    }

    function quickCheckStep3(){
      const before=document.getElementById('textBefore').value;
      const sug=document.getElementById('textSug').value;
      const after=document.getElementById('textAfter').value;
      const fb=document.getElementById('fbStep3');
      if(!before.trim() || !after.trim()){
        fb.innerHTML='<span class="result-bad">Escribe tu texto antes y despu√©s de las sugerencias.</span>';
        return;
      }
      const lenBefore=before.trim().split(/\s+/).length;
      const lenAfter=after.trim().split(/\s+/).length;
      let msg='';
      if(lenAfter>lenBefore){
        msg+='Tu nueva versi√≥n parece m√°s desarrollada. ';
      }else{
        msg+='Tu nueva versi√≥n tiene una extensi√≥n similar o menor; revisa si realmente agregaste mejoras. ';
      }
      if(sug.trim()){
        msg+='Tomaste en cuenta sugerencias para mejorar tu texto.';
      }else{
        msg+='Ser√≠a bueno escribir las sugerencias que recibiste para recordar qu√© cambiaste.';
      }
      fb.textContent=msg;
    }

    function generateResults(){
      const name=document.getElementById('studentName').value || 'Sin nombre';
      document.getElementById('resName').textContent=name;

      // R1: comprensi√≥n de buenas sugerencias (Paso 1)
      const s1=document.getElementById('sug1').checked;
      const s2=document.getElementById('sug2').checked;
      const s3=document.getElementById('sug3').checked;
      const r1=document.getElementById('resR1');
      const okSug = (!s1 && s2 && s3);
      if(okSug){
        r1.innerHTML='<span style="color:#1d4ed8;">Reconoce qu√© comentarios son √∫tiles para mejorar un texto.</span>';
      }else{
        r1.innerHTML='<span style="color:#b91c1c;">Debe reforzar la identificaci√≥n de sugerencias claras y respetuosas.</span>';
      }

      // R2: an√°lisis de sugerencias (Paso 2)
      const c1=document.querySelector('input[name="c1"]:checked');
      const c2=document.querySelector('input[name="c2"]:checked');
      const c3=document.querySelector('input[name="c3"]:checked');
      const c4=document.querySelector('input[name="c4"]:checked');
      const r2=document.getElementById('resR2');
      const ok1=c1 && c1.value==='ayuda';
      const ok2=c2 && c2.value==='no';
      const ok3=c3 && c3.value==='ayuda';
      const ok4=c4 && c4.value==='no';
      const okClas = ok1 && ok2 && ok3 && ok4;
      if(okClas){
        r2.innerHTML='<span style="color:#1d4ed8;">Distingue entre sugerencias que mejoran el texto y comentarios que no ayudan.</span>';
      }else{
        r2.innerHTML='<span style="color:#b91c1c;">Necesita revisar mejor qu√© tipo de sugerencias realmente mejoran un texto.</span>';
      }

      // R3: mejora de su propio texto (Paso 3)
      const before=document.getElementById('textBefore').value.trim();
      const sug=document.getElementById('textSug').value.trim();
      const after=document.getElementById('textAfter').value.trim();
      const r3=document.getElementById('resR3');
      let okMejora=false;
      if(before && after){
        const lenBefore=before.split(/\s+/).length;
        const lenAfter=after.split(/\s+/).length;
        okMejora = (lenAfter>=lenBefore) && (after!==before);
      }
      if(okMejora && sug){
        r3.innerHTML='<span style="color:#1d4ed8;">Reescribe su texto tomando en cuenta sugerencias de mejora.</span>';
      }else{
        r3.innerHTML='<span style="color:#b91c1c;">A√∫n necesita mostrar con m√°s claridad c√≥mo las sugerencias mejoran su texto.</span>';
      }

      const score=(okSug?1:0)+(okClas?1:0)+(okMejora&&sug?1:0);
      const comment=document.getElementById('resComment');
      if(score===3){
        comment.textContent='¬°Excelente! Usas las sugerencias como una herramienta para mejorar tus textos y est√°s listo para compartirlos con otros.';
      }else if(score===2){
        comment.textContent='Vas muy bien. Refuerza el aspecto en rojo y tus textos seguir√°n mejorando con el apoyo de tus compa√±eros y maestras.';
      }else{
        comment.textContent='Sigue practicando. Dar y recibir sugerencias es una habilidad que se aprende con el tiempo y el respeto.';
      }

      document.getElementById('resultsPanel').style.display='block';
      setStep(4);
      document.getElementById('resultsPanel').scrollIntoView({behavior:'smooth'});
    }
  </script>
</body>
</html>
